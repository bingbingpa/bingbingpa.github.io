<!DOCTYPE html><html lang="ko" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.60dd5417d208134c26ca.css" id="gatsby-global-css">@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Open Sans Light "),local("Open Sans-Light"),url(/static/open-sans-latin-300-60c866748ff15f5b347fdba64596b1b1.woff2) format("woff2"),url(/static/open-sans-latin-300-521d17bc9f3526c690e8ada6eee55bec.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Open Sans Light italic"),local("Open Sans-Lightitalic"),url(/static/open-sans-latin-300italic-06bbd3188b34820cd83a0e0b3d0a6f57.woff2) format("woff2"),url(/static/open-sans-latin-300italic-8a648ff38ded89ea15916e84529d62d3.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Open Sans Regular "),local("Open Sans-Regular"),url(/static/open-sans-latin-400-cffb686d7d2f4682df8342bd4d276e09.woff2) format("woff2"),url(/static/open-sans-latin-400-bf2d0783515b7d75c35bde69e01b3135.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Open Sans Regular italic"),local("Open Sans-Regularitalic"),url(/static/open-sans-latin-400italic-987032ea5d57c93d8da215678eae3b86.woff2) format("woff2"),url(/static/open-sans-latin-400italic-db70d0b9cb27ada1a260a2b35e756b8b.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Open Sans SemiBold "),local("Open Sans-SemiBold"),url(/static/open-sans-latin-600-223a277bd88d8a90c8cdf24cda0ad5f5.woff2) format("woff2"),url(/static/open-sans-latin-600-1cd5320f8937d337b61d5117cf9d7b28.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:600;src:local("Open Sans SemiBold italic"),local("Open Sans-SemiBolditalic"),url(/static/open-sans-latin-600italic-4950a7205f0b5cefe41fc03ac346e236.woff2) format("woff2"),url(/static/open-sans-latin-600italic-318ea1ada4102c0704a0637228dcad03.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Open Sans Bold "),local("Open Sans-Bold"),url(/static/open-sans-latin-700-d08c09f2f169f4a6edbcf8b8d1636cb4.woff2) format("woff2"),url(/static/open-sans-latin-700-623e3205570002af47fc2b88f9335d19.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Open Sans Bold italic"),local("Open Sans-Bolditalic"),url(/static/open-sans-latin-700italic-c02f5da6e82e1efe0b45841bfd49ce37.woff2) format("woff2"),url(/static/open-sans-latin-700italic-72e19cbb0e38c6773a7751156752cec4.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold "),local("Open Sans-ExtraBold"),url(/static/open-sans-latin-800-aaeffaf205b9bbb09920089a14dbe9e8.woff2) format("woff2"),url(/static/open-sans-latin-800-c6aa0c4a601fb6ac66f8253fa594dff5.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold italic"),local("Open Sans-ExtraBolditalic"),url(/static/open-sans-latin-800italic-6b3973ffe02bb6a8be0f8453506ec032.woff2) format("woff2"),url(/static/open-sans-latin-800italic-79b58175343190550489efe46a7f1138.woff) format("woff")}.footer{background:#fff;padding:0 20px 120px}.footer ul{list-style:none;text-align:center;padding:0}.footer ul li{color:#969492;font-size:.8em;padding:2px 10px;position:relative;display:inline-block}.footer ul li:after{content:"\2022";position:absolute;right:-5px}.footer ul li:last-child:after{content:""}@media screen and (min-width:1024px){.footer{padding:0 1em 1.5em}}.item,.showItem{background:transparent;transition:all .5s;display:flex;align-items:center}.item a,.showItem a{padding:10px;display:flex;align-items:center}.item svg,.showItem svg{margin:0 5px 0 0;opacity:.3}.itemList .hideItem{display:none}@media screen and (min-width:1024px){.item a{color:#3e3e3c;padding:10px;transition:all .5s;border-radius:5px}.homepage:not(.fixed) .item a{color:#fff}.item a:hover{color:#709425;background:hsla(0,0%,100%,.4)}.item svg{transition:all .5s}.item:hover svg{fill:#709425;opacity:1}.hero .item:hover svg svg{fill:green}.showItem{display:none}.hiddenItem{text-align:left;padding:5px}.hiddenItem a.inHiddenItem{color:#3e3e3c}.hiddenItem a.inHiddenItem:hover{color:#709425}}.more{cursor:pointer}@media screen and (max-width:1023px){.more{background:#fff;border-radius:5px 5px 0 0;border:1px solid #709425;border-bottom:none;position:absolute;left:50%;top:-35px;width:60px;height:36px;overflow:hidden;z-index:1;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.more:focus{outline:none}.more:focus svg{fill:#709425}.more svg{transition:all .5s;-webkit-transform:rotate(180deg);transform:rotate(180deg);fill:orange}.open .more svg{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@media screen and (min-width:1024px){.more{flex-shrink:0;flex-grow:0;width:44px;height:38px;background:transparent;margin-left:10px;border-radius:5px;border:1px solid #ecebea;display:flex;transition:background-color .5s;justify-content:center;align-items:center;padding:0;z-index:1}.more:focus,.more:hover{outline:none}.more svg{transition:all .5s}.homepage .more{border:1px solid transparent;background-color:hsla(0,0%,100%,.1)}.homepage .more:hover{background-color:hsla(0,0%,100%,.4)}.open .more{background-color:hsla(0,0%,100%,.9);border-bottom-left-radius:0;border-bottom-right-radius:0}.open .more:hover{background-color:hsla(0,0%,100%,.1)}.open .more svg{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fixed .more{border:1px solid #ecebea;height:30px}}.menu{align-items:center;background:#fff;bottom:0;flex-grow:1;left:0;padding:0 10px;position:fixed;z-index:1;transition:all .5s}.itemList,.menu{display:flex;width:100%}.itemList{flex-wrap:wrap;justify-content:center;list-style:none;margin:0;padding:0;position:relative}@media screen and (max-width:1023px){.menu:after{position:absolute;content:"";left:20px;right:20px;top:0;height:1px;background:#709425}.menu.open{padding:20px}.homepage:not(.fixed) .menu{bottom:-100px}}@media screen and (min-width:1024px){.menu{border-top:none;background:transparent;display:flex;position:relative;padding-left:50px;transition:none}.itemList,.menu{justify-content:flex-end}.itemList{padding:0}.hiddenItemList{list-style:none;margin:0;position:absolute;background:#fff;border:1px solid #ecebea;top:48px;right:10px;display:flex;flex-direction:column;justify-content:flex-start;padding:20px;border-radius:5px 0 5px 5px}.hiddenItemList:after{content:"";background:#fff;z-index:10;top:-10px;right:-1px;width:44px;height:10px;position:absolute;border-left:1px solid #ecebea;border-right:1px solid #ecebea}.homepage:not(.fixed) .hiddenItemList{border:1px solid transparent;background:hsla(0,0%,100%,.9);top:50px}.homepage:not(.fixed) .hiddenItemList:after{top:-11px;border-left:1px solid transparent;border-right:1px solid transparent;background:hsla(0,0%,100%,.9)}.fixed .hiddenItemList{top:44px}}.header{justify-content:center;background-color:#fff;height:80px;position:relative;top:0;width:100%}.header,.header a.logoType{align-items:center;display:flex}.header a.logoType{flex-direction:"column";color:#3e3e3c}.header a.logoType .logo{flex-shrink:0}.header.homepage{position:absolute;background-color:transparent;height:100px}.h1-header{font-size:1.35em;font-weight:400;margin:0 0 5px}.h2-header{font-weight:400;font-size:.8em;letter-spacing:0;margin:0}.logo{border-radius:65% 75%;border:1px solid #eee;display:inline-block;height:44px;margin:0 20px 0 0;overflow:hidden;width:44px;transition:all .5s}.homepage .logo{height:60px;width:60px}.logo img{width:100%}.sensor-homepage{top:100px}.sensor-default,.sensor-homepage{display:block;position:absolute;bottom:0;z-index:1;left:0;right:0;height:1px}.sensor-default{top:80px}@media screen and (min-width:600px){.header{padding:40px}.header.homepage{height:100px}}@media screen and (max-width:1023px){.header.homepage .logo{border:none}.header.homepage .h1-header,.header.homepage a.logoType{color:#fff}.header.homepage .h2-header{color:#dddbda}}@media screen and (min-width:1024px){.header{align-items:center;display:flex;position:absolute;justify-content:space-between;transition:padding .5s}.header,.header.fixed{background-color:#fff;top:0;width:100%}.header.fixed{height:50px;left:0;padding:0 20px;position:fixed;z-index:1}.header.fixed .h1-header{margin:0 0 2px}.header.fixed .h2-header{display:none}.header.homepage:not(.fixed) .h1-header,.header.homepage:not(.fixed) a.logoType{color:#fff}.header.homepage:not(.fixed) .h2-header{color:#dddbda}.header a.logoType{text-align:left;flex-direction:row;flex-shrink:0;width:auto}.logo{margin:0 20px 0 0}.fixed .logo{height:36px;width:36px}.header.homepage:not(.fixed) .logo{border:none}h2{-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-name:h2Entry;animation-name:h2Entry}@-webkit-keyframes h2Entry{0%{opacity:0}to{opacity:1}}@keyframes h2Entry{0%{opacity:0}to{opacity:1}}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit;margin:0;padding:0}body{font-family:Open Sans,sans-serif}body h1,body h2,body h3{font-weight:600;line-height:1.1;letter-spacing:-.03em;margin:0}body h1{letter-spacing:-.04em}body p{margin:0}body strong{font-weight:600}body a{text-decoration:none;color:#666}body main{width:auto;display:block;min-height:80vh}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.article{padding:20px;margin:0 auto}@media screen and (min-width:600px){.article{padding:20px 40px;max-width:650px}}@media screen and (min-width:1024px){.article{padding:130px 0 40px;max-width:700px}}.h1-headline{font-size:2.2em;margin:0 0 40px;-webkit-animation-name:headlineEntry;animation-name:headlineEntry;-webkit-animation-duration:1s;animation-duration:1s}.h1-headline span{font-weight:400;display:block;font-size:.5em;letter-spacing:0;margin:0 0 5px}.h1-headline svg{height:.75em;fill:#709425}@-webkit-keyframes headlineEntry{0%{opacity:.5}to{opacity:1}}@keyframes headlineEntry{0%{opacity:.5}to{opacity:1}}@media screen and (min-width:600px){.h1-headline{font-size:2.4em}}@media screen and (min-width:1024px){.h1-headline{font-size:2.8em}}.ul-list{margin:0 0 20px;padding:20px;list-style:circle}.li-list{padding:5px 0;font-size:1.1em;line-height:1.4}.h2-category{margin:0 0 .5em}.h2-category svg{height:.8em;fill:#709425}.form-search{border-bottom:1px solid #aaa}.form-search,.input-search{position:relative;display:flex;justify-content:space-between}.input-search{border:0;width:100%;padding:.2em;font-size:1.4em;flex-grow:1}.link{width:100%;color:#3e3e3c}.li-item{border:1px solid transparent;border-radius:10px;margin:40px 0 60px;padding:10px;position:relative;transition:all .5s;background:transparent}.li-item .gatsby-image-outer-wrapper{border-radius:10px;border:1px solid #ecebea;overflow:hidden}.li-item .gatsby-image-outer-wrapper img{z-index:-1}.li-item:after{bottom:-30px}.li-item:after,.li-item:first-child:before{border-top:1px solid #ecebea;content:"";height:0;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);transition:all .5s;width:50%}.li-item:first-child:before{top:-30px}.h1-item{padding:20px 10px 0;line-height:1.1;font-size:1.7em;text-remove-gap:both}.h1-item .arrow{display:none;position:relative;top:7px}.item-meta{display:flex;flex-flow:row wrap;font-size:.8em;padding:20px 10px;background:transparent}.item-meta svg{fill:#709425;margin:0 5px 0 0}.item-meta span{align-items:center;display:flex;text-transform:uppercase;margin:5px 10px 5px 0}.item-excerpt{line-height:1.5;padding:0 10px;text-remove-gap:both}@media screen and (min-width:600px){.li-item{padding:20px}.li-item:after{bottom:-40px}.li-item:first-child:before{top:-35px}.h1-item{font-size:2.04em;padding:30px 20px 0;transition:all .5s}.item-meta{padding:30px 20px}.item-excerpt{padding:0 20px}}@media screen and (min-width:1024px){.li-item{padding:0 0 40px}.li-item:after{bottom:-30px}.blogItemLink:first-child>li:before,.li-item:first-child:before{top:-55px}.h1-item{font-size:2.5em;padding:24px 40px 0}.item-meta{padding:30px 40px 10px}.item-excerpt{padding:0 40px}.li-item:hover{border:1px solid #ecebea;box-shadow:0 3px 2px rgba(0,0,0,.03)}.li-item:hover:after{bottom:-50px}.li-item:hover .gatsby-image-wrapper{-webkit-transform:scale(1.1);transform:scale(1.1)}.li-item:hover .h1-item{color:#709425}.li-item:hover .arrow{opacity:1;stroke:orange;-webkit-transform:translateX(0);transform:translateX(0)}.li-item .arrow,.li-item .gatsby-image-wrapper{transition:all .5s}.li-item .arrow{display:inline-block;fill:orange;stroke:orange;stroke-width:40;stroke-linecap:round;opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%)}}.main{padding:0 20px}.blog-ul{list-style:none;margin:0 auto;padding:30px 0 10px}@media screen and (min-width:601px){.main{padding:0 0 30px}.blog-ul{max-width:650px}}@media screen and (min-width:1025px){.blog-ul{max-width:700px}}.icon{display:flex;justify-content:flex-end;margin-bottom:20px}.icon svg{height:30px}.bodytext{-webkit-animation-name:bodytextEntry;animation-name:bodytextEntry;-webkit-animation-duration:1s;animation-duration:1s}.bodytext h2,.bodytext h3{margin:1.5em 0 1em}.bodytext h2{line-height:1.2;font-size:1.7em}.bodytext h3{font-size:1.35em;line-height:1.3}.bodytext ul{list-style:circle;margin:0 0 1.5em;padding:0 0 0 1.5em}.bodytext li{margin:.7em 0;line-height:1.5}.bodytext a{font-weight:600;color:#709425;text-decoration:underline}.bodytext a.gatsby-resp-image-link{display:block;margin:2.5em 0;border-radius:10px;overflow:hidden;border:1px solid #ecebea}.bodytext code.language-text{background:#ecebea;text-shadow:none;color:inherit;padding:.1em .3em .2em;border-radius:.1em}@-webkit-keyframes bodytextEntry{0%{opacity:0}to{opacity:1}}@keyframes bodytextEntry{0%{opacity:0}to{opacity:1}}table{border-collapse:collapse;width:100%}table,td,th{border:2px solid #ccc}td,th{padding:8px;text-align:left;font-family:Arial,sans-serif}th{background-color:#f2f2f2;color:#000}tr:hover{background-color:#f5f5f5}.meta{display:flex;flex-flow:row wrap;font-size:1em;margin:20px 0;background:transparent}.meta svg{fill:#709425;margin:0 5px 0 0}.meta .span-meta{align-items:center;display:flex;text-transform:uppercase;margin:5px 10px 5px 0}@media screen and (min-width:600px){.meta{margin:30px 0 20px}}.author{margin:40px 0;padding:40px 0;border-top:1px solid #ecebea;border-bottom:1px solid #ecebea}.avatar{float:left;border-radius:65% 75%;border:1px solid #ecebea;display:inline-block;height:50px;margin:5px 20px 0 0;overflow:hidden;width:50px}.avatar img{width:100%}.note{font-size:.9em;line-height:1.6}@media screen and (min-width:600px){.author{display:flex}.avatar{flex:0 0 auto}}.links{flex-direction:column;padding:0 20px 40px;border-bottom:1px solid #ecebea;margin:0 0 40px}.links,.links a{display:flex}.links a:nth-child(2){margin:20px 0 0}.links svg{fill:orange;width:20px;height:20px;flex-shrink:0;flex-grow:0;margin:20px}h4{font-weight:600;margin:0;font-size:1.1em}time{color:#969492;display:block;font-weight:400;font-size:.8em;margin-top:.5em}@media screen and (min-width:1024px){.links{flex-direction:row-reverse;justify-content:center}.links a{flex-basis:50%}.links a:nth-child(2){margin:0}.links svg{transition:all .5s;margin:10px}}@media screen and (min-width:1024px)and (hover:hover){.links a:hover svg{-webkit-transform:scale(1.5);transform:scale(1.5)}}@media(max-width:768px){.matrix{width:100%}}.hero{align-items:center;display:flex;justify-content:center}.button-matrix{position:absolute;top:80%;background:#709425;border:0;border-radius:50%;font-size:1.35em;padding:10px 20px;cursor:pointer;width:80px;height:80px}.button-matrix:focus{outline-style:none;background:#709425}.button-matrix svg{position:relative;top:5px;fill:#fff;stroke-width:40;stroke:#fff;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-name:buttonIconMove;animation-name:buttonIconMove;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes buttonIconMove{0%{-webkit-transform:translateY(0);transform:translateY(0)}50%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes buttonIconMove{0%{-webkit-transform:translateY(0);transform:translateY(0)}50%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.hr-index{margin:0;border:0}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="canonical" href="https://bingbingpa.github.io/jenkins-build-deploy/" data-baseprotocol="https:" data-basehost="bingbingpa.github.io"/><title data-react-helmet="true">jenkins 를 이용한 빌드 &amp; 배포 - 삽질 저장소</title><meta data-react-helmet="true" name="description" content="삽질한 내용들을 정리하는 블로그"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="jenkins 를 이용한 빌드 &amp; 배포 - 삽질 저장소"/><meta data-react-helmet="true" property="og:description" content="삽질한 내용들을 정리하는 블로그"/><meta data-react-helmet="true" property="og:image" content="preview.png"/><meta data-react-helmet="true" property="og:url" content="https://bingbingpa.github.io/jenkins-build-deploy/"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="google-site-verification" content="05n7EQOUWLW-NVaGmvLtb2mFwNCQlApz6zHbZyGwW58"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#666"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-e1f2b59f9e542546e6c7.js"/><link as="script" rel="preload" href="/framework-acd7498685eeb36e39da.js"/><link as="script" rel="preload" href="/1bfc9850-d06e3c25ea137ea82c47.js"/><link as="script" rel="preload" href="/app-cc3235dd701427d7b59f.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/3df72598ed628fa3b584613cd093848b9c087970-7e8ab1b1cd93282549c1.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-dd92b58e687c0d5ee5f5.js"/><link as="fetch" rel="preload" href="/page-data/jenkins-build-deploy/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/960164547.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/960164547.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#D0E0D8"/><meta name="apple-mobile-web-app-title" content="Lazywill"/><link rel="apple-touch-icon" href="/icons/apple-icon-57x57.png" sizes="57x57"/><link rel="apple-touch-icon" href="/icons/apple-icon-60x60.png" sizes="60x60"/><link rel="apple-touch-icon" href="/icons/apple-icon-72x72.png" sizes="72x72"/><link rel="apple-touch-icon" href="/icons/apple-icon-76x76.png" sizes="76x76"/><link rel="apple-touch-icon" href="/icons/apple-icon-114x114.png" sizes="114x114"/><link rel="apple-touch-icon" href="/icons/apple-icon-120x120.png" sizes="120x120"/><link rel="apple-touch-icon" href="/icons/apple-icon-144x144.png" sizes="144x144"/><link rel="apple-touch-icon" href="/icons/apple-icon-152x152.png" sizes="152x152"/><link rel="apple-touch-icon" href="/icons/apple-icon-180x180.png" sizes="180x180"/><link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="header  "><a class="logoType" href="/"><div class="logo"><img src="https://avatars.githubusercontent.com/u/6446144?v=4" alt="삽질저장소"/></div><div class="type"><h1 class="h1-header">삽질저장소</h1><h2 class="h2-header"></h2></div></a><nav class="menu " rel="js-menu"><ul class="itemList"><li class="item"><a class="" data-slug="/" href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg> <!-- -->Home</a></li><li class="item"><a class="" data-slug="/category/" href="/category/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg> <!-- -->Categories</a></li><li class="item"><a class="" data-slug="/search/" href="/search/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg> <!-- -->Search</a></li><li class="item"><a class="" data-slug="/about/" href="/about/"> <!-- -->About</a></li></ul></nav></header><div class="sensor-default"></div><main><article class="article"><header><h1 class="h1-headline">jenkins 를 이용한 빌드 &amp; 배포</h1><p class="meta"><span class="span-meta"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" size="18" height="18" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"></path></svg> <!-- -->2021-11-15</span><span class="span-meta"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" size="18" height="18" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg><a href="/category/infra">infra</a></span></p></header><div class="bodytext"><h2>목표</h2>
<ul>
<li>git repository 의 특정 브랜치에 소스가 push 되면, git repository 의 webhook 설정에 의해 jenkins 의 아이템을 실행한다.</li>
<li>item 은 pipeLine 으로 구성하고, Jenkinsfile 을 작성하여 빌드 및 배포 구성을 코드로 관리한다.</li>
<li>
<p>빌드 구성</p>
<ul>
<li>gradlew clean build</li>
<li>build 결과물을 바탕으로 Dockerfile build</li>
<li>docker compose 로  n 개의 springBoot app, maria-db container 를 실행</li>
<li>slack 으로 배포 결과 알림</li>
</ul>
</li>
<li>포스팅에 사용한 저장소: <a href="https://github.com/bingbingpa/spring-boot-with-docker">https://github.com/bingbingpa/spring-boot-with-docker</a></li>
</ul>
<h3>1. 젠킨스 설치</h3>
<ul>
<li>
<p>저장소 키 다운로드</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">wget</span> -q -O - https://pkg.jenkins.io/debian/jenkins.io.key <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -</code></pre></div>
</li>
<li>
<p>sources.list 에 추가</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">echo</span> deb http://pkg.jenkins.io/debian-stable binary/ <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/jenkins.list</code></pre></div>
</li>
<li>
<p>젠킨스 설치</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">install</span> jenkins</code></pre></div>
</li>
<li>
<p>초기 설치시 기본 포트는 8080 이며, 필요하다면 변경해주도록 한다.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">vi</span> /etc/default/jenkins</code></pre></div>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/71f71ae8f0de61490d62aa4d132d9294/9144d/jenkins-port.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 401px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 23%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAANZJREFUeNqVj11uwjAQhH2TUnvXcQJIQFWRQEzIjwOkUnv/00zXCQiExAMPn7w7Gnln1OG4wmfhYdsA7s/gYwPuAmi9gSYLk6Rvobxf4sNmMKmQLaDnS5nn0NHgRLMO2vCEHBiJGid34n5FldUKpjjA1Q0oz2GLErz3oG0BW7eg7+2Uuu3krcG+gll/gcNJtDBq0cunC+wwQFX1BnnVogw9dvJBP/xg13S4/P7Bi1nHlDH1yGJsYW5a9rBfZ1VK5Rk5sEvhxERSlZIMVmqTGF/We6o6aQ7/h7OYk0KAw+QAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="jenkins-port"
        title=""
        src="/static/71f71ae8f0de61490d62aa4d132d9294/9144d/jenkins-port.png"
        srcset="/static/71f71ae8f0de61490d62aa4d132d9294/772e8/jenkins-port.png 200w,
/static/71f71ae8f0de61490d62aa4d132d9294/e17e5/jenkins-port.png 400w,
/static/71f71ae8f0de61490d62aa4d132d9294/9144d/jenkins-port.png 401w"
        sizes="(max-width: 401px) 100vw, 401px"
      />
    </span>
  </span>
  
  </a>
    </p>
</li>
<li>젠킨스의 pipeline 으로 docker 를 실행하기 위해 권한을 부여한다.</li>
<li>
<p>/usr/bin/docker 의 사용자그룹을 jenkins 에 추가해준다.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">usermod</span> -aG root jenkins</code></pre></div>
</li>
<li>
<p>서비스를 재시작하고 잘 기동 되었는지 확인한다.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">sudo</span> systemctl restart jenkins
<span class="token function">sudo</span> systemctl status jenkins</code></pre></div>
</li>
<li>localhost:8091 로 접속 후 /var/lib/jenkins/ 경로의 secrets 폴더에서 initialAdminPassword 의 내용을 확인해서 입력한다.

  <a
    class="gatsby-resp-image-link"
    href="/static/4f778b925c8c96d14cfa5e7257c74106/0a867/jenkins-init-password.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 40.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAQNJREFUeNp9UstywyAM9P//VzpNfUtvvvjqMU8bgwE/NoKaNOnU0cwOEo+VVqLijKHrOiilsO97xrZtL/66rg+k+B0qH0J2rLUwxmCaLJxzGMcxx/M8Y1mWUzwnS6i89whEWtc1rtdPfN9uaJoGH5cLvihu2zYnXOIvwX/ERVUVY8yXlFYQUoJJDaaGjJ58TnuSzvK5ENBaH0qmFyTCZFUiS8zzQBIFPWIDODcZStBDoWFp3+kRnuQnNWeWKyyEVg9wVJWTChMXRCTzanpOoJXL3NvUU/tU0Skh4xw9TZyTLE9tCNSXeCBkRJR+h2OQ5RcU/yE5WZryZH76UZK8w9/vUgjvfuVt31s4IhgAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="init-password"
        title=""
        src="/static/4f778b925c8c96d14cfa5e7257c74106/5a190/jenkins-init-password.png"
        srcset="/static/4f778b925c8c96d14cfa5e7257c74106/772e8/jenkins-init-password.png 200w,
/static/4f778b925c8c96d14cfa5e7257c74106/e17e5/jenkins-init-password.png 400w,
/static/4f778b925c8c96d14cfa5e7257c74106/5a190/jenkins-init-password.png 800w,
/static/4f778b925c8c96d14cfa5e7257c74106/0a867/jenkins-init-password.png 986w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>install suggested plugins 를 선택해서 추천 설정으로 설치한다.

  <a
    class="gatsby-resp-image-link"
    href="/static/e472196db878f36ccf641bb198c5273f/508ef/install-suggested.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 578px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 54%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAZZJREFUeNp9Uu1uozAQ5P2frM2fU3Vp706EECAQsCFAwYTv6e6mrlBa3UrDsjaMZ7zrlGUJpRSqqsK6rliW5Ufw3v/AMc8zHGMMGOM4yqLd3H7IMU2TfMP5EUxk4fDpTBgEAY7HI3zflxxFEcIwhOu6sjYMw5eDR3XbNYcfXdcJif3Z8zw54HQ6wTscpG7bVkiHvkf/Ca5Z1daR83gPNpZlxcQ26HSpaf9ueUZPRHfS4Ztih56YaHEf59h5MV4pv4QKcd0hMyNy0+NyueBw8BCdz4iTBC1d0TCM6G43uUPStyGkYpgX/Io0nv0Ubt7ALw3OTY/gvUdCxCrLxH5d12iaBjciMqYFTwhPB/fAKnXYzm2csc8q7NNS8JpW+H0p8abfEZYNrkUho8XIiJwVp2kKnedEWH+RcgihGSY8Rzmewlzy7lxgx3VUwNUVKUyl6wnZjeNYwMRKaVFsIWNzVzjhj6rwlxT9I9j8pmoEBSkga8X1iqughNY5ElKptJbuMxl3nG079+7aDq8/4PNtMwn84+Ng2/gAZapOhN/UPyMAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="install"
        title=""
        src="/static/e472196db878f36ccf641bb198c5273f/508ef/install-suggested.png"
        srcset="/static/e472196db878f36ccf641bb198c5273f/772e8/install-suggested.png 200w,
/static/e472196db878f36ccf641bb198c5273f/e17e5/install-suggested.png 400w,
/static/e472196db878f36ccf641bb198c5273f/508ef/install-suggested.png 578w"
        sizes="(max-width: 578px) 100vw, 578px"
      />
    </span>
  </span>
  
  </a>
    

  <a
    class="gatsby-resp-image-link"
    href="/static/2cf32cdd6c424d4e1c9a6dd5665d4bf5/e4900/jenkins-install.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 85.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAiBJREFUeNqtlFuvk0AQx/n+H8Tz4osPRhMfTIyaeDnnwd7MOeW2sBTYXVoKpXf+zmyptlprmkjy78LszG9nhimOMQZ5nqMoCux2uz+03+9vkrNcLrHdbtG2wJ5+2LjjTTbQ1dK6Xq+x2WzOxDGX5KxWKxuQxAKpFChUBpUmJIlExkjTzEKvZdt2idgMt3Taar3Bi7dfcPfqPZ69fIfnbz7h7vVHfPj8ABEG1vFaVnxY21Xk7NhIAU9ZjVHCqjCUcwxkhcXm4HQMuiYGspx2fwj6X5fTC/t4TB7hKt9qGI/QF0OIMoZnfHwLehjF32nPg6tdjLMxntInRLSfq8N0VFWFumbVcL4G97j3H9Cb9DE2LuJMIkxC5NMcE5MikAFkLskeI9GptZdNiRlJRAJCCCilMJ/PLdhxQx9REiFV5KwVpsUMWmnMiimMKeCOXfge+YiIspmi0MbuN3UDozWSJLGgJU0LT4wjRGwdWDzkhkrgQa+oBEOAwWAAz/MwmUyguz9BlmUoyxKaEsiy3IKOcoIwtKewEzvnlD4Hc4CiQ1yCpWlqA9mPJbuV/QLft/uLxeJQckQ9kJJ6FMdWfH/6zIHH+1Md7bzWBGuaxkId0QF/Bx3hp4ec+jBIdz3kala/eij+GngJdAak9vAzvyyG8XfhDHiLGKio5xzLvfsJjKLon5ldkgWqA5BnkD8wFhgEARh6i7iqiLI0Rne9NPalMPAH4oACsqEZS+gAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="install"
        title=""
        src="/static/2cf32cdd6c424d4e1c9a6dd5665d4bf5/5a190/jenkins-install.png"
        srcset="/static/2cf32cdd6c424d4e1c9a6dd5665d4bf5/772e8/jenkins-install.png 200w,
/static/2cf32cdd6c424d4e1c9a6dd5665d4bf5/e17e5/jenkins-install.png 400w,
/static/2cf32cdd6c424d4e1c9a6dd5665d4bf5/5a190/jenkins-install.png 800w,
/static/2cf32cdd6c424d4e1c9a6dd5665d4bf5/e4900/jenkins-install.png 988w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>설치가 끝나면 적절한 계정을 생성하고, url 에 별도의 컨텍스트가 필요하다면 추가한다.</li>
</ul>
<br>
<h3>2. 젠킨스 아이템 설정</h3>
<ul>
<li>
<p>repository 에 Jenkinsfile 추가하기</p>
<ul>
<li>젠킨스 pipeline 에서 사용할 Jenkinsfile 을 프로젝트의 루트 경로에 다음과 같이 작성하고 커밋 &#x26; 푸쉬</li>
<li>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">  pipeline <span class="token punctuation">{</span>
      agent any
      stages <span class="token punctuation">{</span>
          stage<span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              steps <span class="token punctuation">{</span>
                  script <span class="token punctuation">{</span>
                      <span class="token function">sh</span> <span class="token string">'echo test'</span>
                  <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span></code></pre></div>
</li>
</ul>
</li>
<li>
<p>github token 생성하기</p>
<ul>
<li>jenkins 에서 github repository 인증을 위해 사용할 token 을 생성한다.</li>
<li>settings - Developer settings - Personal access tokens - Generate new token 선택해서 토큰 생성</li>
<li>repo, admin:repo_hook 만 체크하고 생성한다.

  <a
    class="gatsby-resp-image-link"
    href="/static/f737f40944ed9980ffa372241a07f456/d54e4/github-token.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 747px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAdRJREFUeNqNVItyhCAM9P8/su3MvTwVBN8PJM3mgNPetVNmMijIsrtJzE5qoUoZcs6R9z7FMIxkm/YQ4zTL3rZtHP4YYT2bFkdKaSrLivp+kAMYXd+Trg0pXZO1DS3LmvZ+G9jPts2R1pry/E41A+AWDIBrBlPayIXTPKdD7yIBOgZQSlF+L2iapnRb23XCLgZYyrkdwJ5ZAlzWVZgg2rYVP7AByYZBEA37Z4yldXVHD/0z4no2jiPdi4IGnjEegETjODHLnvphEPlgvPcR00/ZOJvBmzzP6ePzi7Ot08cNsy0qJWs6yMZzwckz1r5URQKcGbCsKrpcr3LABy/ADllGomyQXrNsvBvTELx/kQ/JkHS93YQFZKY6ZAuathPgjiPOqEdYAGUuVERkJ4DLsghDSNpnDIeFUYjI0IR3EMA3AHdu25UNe2GMYVCVqj56KJIDAC4UIF5DTNw1M5PBDMCUZUi7cw0i04oLPDIcuSZblvyQ2x266F2HxMh86JTz+UJFUSZfIBFJAnM8/9UlB8CyZcDapmzGwgZDFPcjBnl/ZvZY1Ckgue5XulxudDqfpZ+jLHhYpTo0Avivn4P3G/vUMctaWgy3y8+By8k2j7aDf/+V/A0BpN/HsAJxYQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="github-token"
        title=""
        src="/static/f737f40944ed9980ffa372241a07f456/d54e4/github-token.png"
        srcset="/static/f737f40944ed9980ffa372241a07f456/772e8/github-token.png 200w,
/static/f737f40944ed9980ffa372241a07f456/e17e5/github-token.png 400w,
/static/f737f40944ed9980ffa372241a07f456/d54e4/github-token.png 747w"
        sizes="(max-width: 747px) 100vw, 747px"
      />
    </span>
  </span>
  
  </a>
    </li>
</ul>
</li>
<li>
<p>젠킨스 아이템 설정</p>
<ul>
<li>메인 화면 좌측 메뉴에서 새로운 Item 선택</li>
<li>item 이름을 입력하고 Pipeline 을 선택 후에  OK

  <a
    class="gatsby-resp-image-link"
    href="/static/64dab3fd82ab5e705f57767f9e9d91c3/561da/jenkins-item-choose.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 83.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAklJREFUeNp9lMluE0EQhvtdeQoeBnFH4hkiceAAEoI4wRnMEM++9DL7YgfxU9WzZCwcDp+qt6r6u3oRcSZxjFIcw8TixRlk2VyhhixeYJ4zVQNxcB/x5estdt/3uNs/4H7vIMnVBTGR6hI5OWWmQsZ2wzKuKLGI0hzOz19IpUbV9TZLrosJU0Ca0rYTVVinlAPOpJs+J1SkVOiiQiIVpNLIOWjTohtGdP2Ith/QUBKm/Q/bNSIPH+DuP+PHwcXdbgff9xHHMeIoQpZlMEZDSYksTZESSklIOZHnOdkcRmvbrmtS2HQdlDF2oGkaO1hVlWUYBjw9PeF8Pq+cTqeVcWbtjyOEooJyHX3Pg9YGZVmSKkNKlFXHibIst5bHtglZwEJNcELRUZ1MUSJJErvdIAjsltnh2Xmy7LRVuGVRT4dSIKR6HY9HCwfkwKyS1bIqtprqxG1Wym2ub0G+y1YXhOOl+Ob4VPgMPdWsbemUqa6sbqnpYhe2W93CNReprumlSAS+Z5WFYYiIFIdhYNthMNmpHKHdwXM/mGttrGoWI3g7YRTbBcsinmCWzNs+277vrRqGt3lxyppeQ5Sk092bMTTGWZfMfPpcL27z/eOSsPMwjGvgJbiIkwzO4ZEu9gGu69rrU8zBmLVNwZr5akwHMFwcxnooLWXD7xF/zgOKuoGipyjtG95SWstzvOYa/AfwsxW3foRXb2/w+v1HePSM+OeYHnz9D/Yz0NdJ6HPgL0wE9Cm8+XCPd58cyKpE2XSUsb0Oz70EzVdtj78bYAUa2q6wUwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="jenkins-item-choose"
        title=""
        src="/static/64dab3fd82ab5e705f57767f9e9d91c3/5a190/jenkins-item-choose.png"
        srcset="/static/64dab3fd82ab5e705f57767f9e9d91c3/772e8/jenkins-item-choose.png 200w,
/static/64dab3fd82ab5e705f57767f9e9d91c3/e17e5/jenkins-item-choose.png 400w,
/static/64dab3fd82ab5e705f57767f9e9d91c3/5a190/jenkins-item-choose.png 800w,
/static/64dab3fd82ab5e705f57767f9e9d91c3/561da/jenkins-item-choose.png 969w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>Build Triggers - GitHub hook trigger for GITScm polling 선택</li>
<li>파이프 라인을 아래와 같이 설정한다.</li>
<li>Repository URL 은 위에서 사용한 저장소 url 을 입력한다.</li>
<li>branch 는 실제 github 저장소에 push 되었을 때 배포가 이루어질 branch 를 선택한다.</li>
<li>Script Path 는 github 저장소의 Jenkinsfile 의 경로를 적어준다.

  <a
    class="gatsby-resp-image-link"
    href="/static/da59b405259aa6e632dca007a3969272/b2cef/pipeline-setting.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 88.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAgFJREFUeNqVlHtP2zAUxfP9v9UmTQimFbRJmwqUiaRN83Iedh520urs3ISiIFrI/vgptescn3tzbC9MFIRtlMIPY+z5+3kXjcg4ThWiKEZWaqTFxyiu8bTWKKsKjbVwwwAr9D0ZRsY55+A+oec7Vd3Aa9oW+yDA7nGDNs/hKP6GsoTjGhG13PQcjrRdBz8t4bVNA3V1jeDLV0TXN8hXd1CrWz4n1I8V6p+/0IsTurjkru0scl3TIQWLzQbxeg0TbFE9+6h8H5quzXYL7Qdod+EkeKlcIoJKBFuWU9UGiVJQlUZhDNzhgP5IDhMyvlSuIIKddSgNe1jXNSzrF9sdxWUDGb/r0xlnp/maVWYqh2iNJZ974SNH8006bp5mCj7bZUw9OTQs0/Ap4kvF5oioOx5RNa3EpkGaJIh2OyjGRkQFWbSIF9H89g5BmPCjFAUSxiX4doWUkwnFC85JT5dyYPjrOEGaV3Qorh4e0TEujhEZ+Kdwytcl5hlsWGrJUyLhHk/KKSbyPJXyPz3UmrFLUiZEjh4/hvQwieOx1HkclmDtFGypKsr1FJs4jpBlGbSc3TGo/bjolYW9NONXpkBId0G45/VTopOdD9Mt88pCtwNFvYpxCe8fYHjnDUUJS6fdDMsTsLSX+7FkRiW++Y5mfY/+6S/c5uktv/9geOnRZ8gV9w9g3msfHWuJ8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="pipeline-setting"
        title=""
        src="/static/da59b405259aa6e632dca007a3969272/5a190/pipeline-setting.png"
        srcset="/static/da59b405259aa6e632dca007a3969272/772e8/pipeline-setting.png 200w,
/static/da59b405259aa6e632dca007a3969272/e17e5/pipeline-setting.png 400w,
/static/da59b405259aa6e632dca007a3969272/5a190/pipeline-setting.png 800w,
/static/da59b405259aa6e632dca007a3969272/b2cef/pipeline-setting.png 847w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>
<p>Credentials Add 를 눌러 새로운 Credentials 를 등록하고 선택한다.</p>
<ul>
<li>Username 은 자유롭게 입력</li>
<li>Password 에 위에서 생성한 github token 을 입력한다.

  <a
    class="gatsby-resp-image-link"
    href="/static/c2c06eb797fa06c7566a248eb9813bf2/a0730/github-jenkins.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAATBJREFUeNqdk1tzgjAQhfP/f1mxoFDBF2oHiuZCQLmLT6fZOPDQMk7x4Zswy+bM2UtYdAix2/nYbncIgg+8OQ7eXReu58EzMT8I4Gw2yLITlMohpIJcQikIIcHCQ4T9fg/f9xFGETjn4EKYn8J+TyeJ5bk25MtobXPY+Xyeg9oEx3HE7Xb7wzAMT6Gcuq7BiqLA9Xq1tG07J/R9vwq605DgoxyFsiytINF13aLL54zgugSbSiWHJEqOJ/E1DjuD1BcwKaXt39qeLaEvFVjKSztJEiV3U9lr6AyNIREa7Hj8QhzHSNMUSZJgckx9/S+5euzhZ5qBUb+apkFVVS9T27PGSeYPQdqfYehXr8rvoajCDGXaPxo7LfXL3O8oq8a8FC5wMq/lO8vmp/YK1Hth7v8Aw/TY5Sa58KkAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="github-jenkins"
        title=""
        src="/static/c2c06eb797fa06c7566a248eb9813bf2/5a190/github-jenkins.png"
        srcset="/static/c2c06eb797fa06c7566a248eb9813bf2/772e8/github-jenkins.png 200w,
/static/c2c06eb797fa06c7566a248eb9813bf2/e17e5/github-jenkins.png 400w,
/static/c2c06eb797fa06c7566a248eb9813bf2/5a190/github-jenkins.png 800w,
/static/c2c06eb797fa06c7566a248eb9813bf2/a0730/github-jenkins.png 1131w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
</ul>
</li>
<li>Credentials 정보를 선택해주고 저장한다.</li>
<li>등록한 아이템을 실행해 본다.

  <a
    class="gatsby-resp-image-link"
    href="/static/f0f9b5c234dd34ccc135180399bdc2d9/86a1e/jenkins-first-build.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 17.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAMhJREFUeNqNictOg0AARfl2i7RUUmjR+kr8jf6GC91UWx+1II/CQh0GnHKcGRMXxoU3Obkv51MphBCahqb5xuS/+g+/diklZVWxSnc4fnTKYBzhh3OGkzkHfsjh0RQvmBGdXOo8w9X/MIiJz65sN4THF0zic/1NcUchnhcwcMc4d5uc1TbjKS24fUy15yR5yTYreHhJ7W66IS0qzc5+z0nGq8llTbK8Z71YsLm+weEf6jUfraLb99SipVV7OtVTvkm7iU5Rv0vrXzBpGtnGVXqCAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="first-build"
        title=""
        src="/static/f0f9b5c234dd34ccc135180399bdc2d9/5a190/jenkins-first-build.png"
        srcset="/static/f0f9b5c234dd34ccc135180399bdc2d9/772e8/jenkins-first-build.png 200w,
/static/f0f9b5c234dd34ccc135180399bdc2d9/e17e5/jenkins-first-build.png 400w,
/static/f0f9b5c234dd34ccc135180399bdc2d9/5a190/jenkins-first-build.png 800w,
/static/f0f9b5c234dd34ccc135180399bdc2d9/c1b63/jenkins-first-build.png 1200w,
/static/f0f9b5c234dd34ccc135180399bdc2d9/86a1e/jenkins-first-build.png 1296w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>메인 좌측메뉴의 빌드기록에서 콘솔 버튼 선택

  <a
    class="gatsby-resp-image-link"
    href="/static/0f59c17ef44b94cd72e0d88a8963abcd/8802b/build-record.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 42%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAATBJREFUeNp1kM1OwkAUhef938AoUAgFipKoiQsfgLDBFCmVAu2Qlp/p9GdtYXO8M1JSQRZfzjk9906Ty3YbjigKwTnXbLdbyht8FwUOhwNR4Hg8aorzt2vKju32AmmaIssySCmRJIn2cRxjL/ZapUwhRHzyEoJUCKG9zuRVp95hvu/jFkHgY7Xy4c4XWCyWlIMbcwHNrRCGIZgK5eB/XsE5caOr7kRRBDb31N9LlhV/wfKy+5s9z8N6vQaLY4k8z+h2km6g7pdqVeRZ+psTqfuyyzSVOdpXd1fKrKdnPBgmjHYPHWuARquLeqtzonvW/uAFLbOPWpMyYfYGaJoWarTbaLRxd2/g9e0dbPThwJ66mH15GI6nGsedX2F/zirZgz1xMCHvjm0M6wZGvUfwcIMfsM43W4NFlycAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="build-record"
        title=""
        src="/static/0f59c17ef44b94cd72e0d88a8963abcd/5a190/build-record.png"
        srcset="/static/0f59c17ef44b94cd72e0d88a8963abcd/772e8/build-record.png 200w,
/static/0f59c17ef44b94cd72e0d88a8963abcd/e17e5/build-record.png 400w,
/static/0f59c17ef44b94cd72e0d88a8963abcd/5a190/build-record.png 800w,
/static/0f59c17ef44b94cd72e0d88a8963abcd/8802b/build-record.png 1135w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>Jenkins 파일이 정상적으로 동작하는지 확인해 본다.

  <a
    class="gatsby-resp-image-link"
    href="/static/8a80fa4dbfe7acc935c4705cce9add02/d72ec/build-console.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 393px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAa5JREFUeNqlVQmSgjAQ5P9fVFEQReSQ+4be6Sguu4oKpmoqRyWd7jkSzfNcrFZr+NJb1gGmaSLPCxwOFqI4hue6MPcmbPsIPwhg7fcIowhsfd8rGzfNlQOn00mZaRpYrzfgmmPb2OhbbLc6jsejXLqCrm9gy74pMAWYZRl830cYhoiFUV3XaNtWWSXjqqquY+lpTdPcAZ+1O2AkMpIkUQeiKFTzqTaAvWR4BYyRCqjrecqPY2lj+0gyAWMBo+TxxilpU+0PYJqmiKVnFJ+x+hxQJDIo9GFZlgjkglTWX0l7w9C7RzmXOfu27ZZLDiRhCULJ97RA/zKak4B5nuN8dpQfabxgqf8UIP1mGAYulwscx0HXdQ++m8WQATlLqfV9p8D+H57NkJIplQyjW+nVt5Ibs12Uh8ktsYuikErJVA1/DcgoDyzf1e0koOf95iEBucYU+rr0BsmslkJ8W4+eqlkMn/mQ42qB7IdabtoGjPwQkLnpo9KGpce3MBG/USrZMoV4GW1OtLXAD+RDOsgHZckn5GO326p5LrIpnf6ck49aWZQqopRMAPXQqtdmmeQfXyYMh9pNvBMAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="build-console"
        title=""
        src="/static/8a80fa4dbfe7acc935c4705cce9add02/d72ec/build-console.png"
        srcset="/static/8a80fa4dbfe7acc935c4705cce9add02/772e8/build-console.png 200w,
/static/8a80fa4dbfe7acc935c4705cce9add02/d72ec/build-console.png 393w"
        sizes="(max-width: 393px) 100vw, 393px"
      />
    </span>
  </span>
  
  </a>
    </li>
</ul>
</li>
</ul>
<br>
<h3>3. github webhook 설정</h3>
<ul>
<li>repository 에 푸쉬가 발생했을 경우 젠킨스에 알려주기 위한 webhook 을 설정한다.</li>
<li>
<p>젠킨스에서 등록한 아이템의 github 저장소에서 Settings - Webhooks - Add webhook 선택</p>
<ul>
<li>Payload URL 에 젠킨스 서버의 url 을 적어줘야 하는데, localhost 가 아닌 외부에서 접근할 수 있는 도메인이 필요하다.</li>
<li>여기서는 테스트를 위해 ngrok(<a href="https://blog.outsider.ne.kr/1159">ngrok으로 로컬 네트워크의 터널 열기 참조</a>) 으로 외부 도메인을 바인딩한다.</li>
<li>공식사이트에서 실행 파일을 다운받고 콘솔에서 다음과 같이 사용할 포트를 입력해준다.</li>
<li>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">./ngrok http <span class="token number">8091</span></code></pre></div>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/cbfe77d2cf42c2ef571e400fd70f4d5e/38af3/ngrok.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 23.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAALBJREFUeNqVUMkKwjAQndSm2TctCNYE+v8f+cykHix40MMwYXhrSDqNS46gEEApg5YFRAQSdOx/JyQNqQji4+iTxf1xgzEGWmvM8/y7YGsNKaV3KjH2uq7Y9x21PlFbxfbcOiYi5wwfPJRSCL1RjBGlFJRrGeZDI5fcAcvJxVgzCDze+yHCpoxlMqdm8SE6jBKsswdfaQUpz5WW/o/TNI0koqf23oFxfHf9zYKc+FvlFyrCa/3Ss/rjAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="ngrok"
        title=""
        src="/static/cbfe77d2cf42c2ef571e400fd70f4d5e/5a190/ngrok.png"
        srcset="/static/cbfe77d2cf42c2ef571e400fd70f4d5e/772e8/ngrok.png 200w,
/static/cbfe77d2cf42c2ef571e400fd70f4d5e/e17e5/ngrok.png 400w,
/static/cbfe77d2cf42c2ef571e400fd70f4d5e/5a190/ngrok.png 800w,
/static/cbfe77d2cf42c2ef571e400fd70f4d5e/38af3/ngrok.png 894w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </p>
</li>
<li>커맨드 실행 후 Forwarding 도메인을 등록한다.</li>
<li><strong>도메인 뒤에 꼭 /github-webhook/ 붙어야 한다. 마지막에 / 도 꼭 필요하다.</strong>

  <a
    class="gatsby-resp-image-link"
    href="/static/b7d2a4706547240a810a7cc5f03b27b5/7de01/webhook.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 794px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 86%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAf1JREFUeNqNVE2P0zAQzf+/IvELEGcOHJHgjoSEuIFWWpq2jp3my47jOE7ymHG2rZctXSw9jT1xxm/ejJ3VxuOXcNgpg8fdAb/zI7R1GMYJ1hESOzzBOr/5E18/eDg/IRvciLrr0ekeTdtFdNrA9DZCmx69HeJ882/rs4+/a2PAceZ5QdZbi/xQYC8UpFQQoohWlSWUKqMtpIRUCkchcDge4/eikLRXQJQdcqnR9iN4ZExXVBayGbAsK26NdV0v4D3LsmzgNf2yYfNnw+Cw3+8h6USeM3W2NsHoPcI8R5yPXJODkByW+YkYypJSOqFqWpRVHaHKKqIgf9sZ+GkmhC0AkkBJFswyc+OI/eFI2ogo6jXNl2nfkuDsvwSciGFdN9BaY6Tg500zpcea3NPzZkDW6FS3mCn/QAynMEds8+t69CHaf41LwBBCLIS59Na1x3iuyfKhrB8HvMXwHCwWhX8SVOHYc2rrP5aA+66qqmi7Tt9NOW2prPcrWrolhjRs2hbM+F4vvpryMge0FIgZ7vKcGJ5icbjifwt/b1zbxs/E0NB91KQV6Uea8XVMb81yJ80XGmoHnKTBbCeAimipII5vi3PxIeD5a9o90/ChecTb7+/x5ts7fPj5iYKuVM0Q+zA82f8dMeWDVvj48IXwGV+LH8/ZJNpc0rqB9NH4Ay2vLaDttov2AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="webhook"
        title=""
        src="/static/b7d2a4706547240a810a7cc5f03b27b5/7de01/webhook.png"
        srcset="/static/b7d2a4706547240a810a7cc5f03b27b5/772e8/webhook.png 200w,
/static/b7d2a4706547240a810a7cc5f03b27b5/e17e5/webhook.png 400w,
/static/b7d2a4706547240a810a7cc5f03b27b5/7de01/webhook.png 794w"
        sizes="(max-width: 794px) 100vw, 794px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>item 으로 등록한 브랜치에 푸쉬 하고 정상적으로 item 이 실행되는지 확인한다.</li>
<li>Recent Deliveries 탭을 선택해서 실행된 webhook 들의 상태를 확인 할 수 있다.

  <a
    class="gatsby-resp-image-link"
    href="/static/1ca2bc92e64c1eb1825299257ee15b61/d7542/recent-deliveries.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAMNJREFUeNqNkIFqxCAMhvv+Dzlu9XoHByu1niYx2n9Jj8KxjbLAR4zoZ+JwXxQfj4owNzzmFeMYMN3uCOGKTyOXAo9t2/7F0FsDE6E1Rc4ZKSUwM47wQ70bR/7BL2FVRXxmFBLElBHXhGdhkKhRoa2fdqTaDLVz7SUUK6aVcY2EKQluqVotCAvh8pWxsp6OLPYos+y5946Bq/3fUjAaLtmJtO9d5oJILnwb+w0XuoyIwSJoLtzbtoWP9hd+8Sy8qwN3fQPm09YKmUe5vgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="recent-deliveries"
        title=""
        src="/static/1ca2bc92e64c1eb1825299257ee15b61/5a190/recent-deliveries.png"
        srcset="/static/1ca2bc92e64c1eb1825299257ee15b61/772e8/recent-deliveries.png 200w,
/static/1ca2bc92e64c1eb1825299257ee15b61/e17e5/recent-deliveries.png 400w,
/static/1ca2bc92e64c1eb1825299257ee15b61/5a190/recent-deliveries.png 800w,
/static/1ca2bc92e64c1eb1825299257ee15b61/d7542/recent-deliveries.png 810w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
</ul>
</li>
</ul>
<br>
<h3>4. slack 연동</h3>
<ul>
<li>설정할 slack 워크스페이스 url/apps 로 접속해서 jenkins 를 검색 후 설치할 채널을 선택하고 설치한다.

  <a
    class="gatsby-resp-image-link"
    href="/static/d065e62af3c1907875fac47f12969ad8/159fb/slack-jenkins-install.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 48.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAVFJREFUeNqNUj1PwzAUzP9kZGOCP8OAEAwVLEgMCBYGWGABqUV0Kf1ATaU2zSchcfPp5LBfmmBCJLB0erZz73TvHM30GVgUwwsiBCxCGASIoghxHP8LSZI0VUJ7Hw6gLxaYjMfwPK8hpmn6J9piJDgevUHXdUynU8xmM8zncyyXS9iWDcuyYNs2TNNs9o7jCFR3m83mt0NJdF2XCKvVisQMw4Dv+wjDEIwxqirqu65oNCY+OI5LpKIoUJZlU+sl912QPBXkcL1eo9/v06hB8Ek5SvGcc3wIl0yMlfEcWV6hLULi2ypz1bIsIwF54LJRnLkQo8W/XapuVcE4SeGzGHnOK8F2Q7Ed9XYyxM7FIfauTrF/3cPu5REObnrIC/6DLydJMk59JNgeoXb3aixw/HSH85dHwsnzPc4GDySguqyyrjKlDNV/qIZ8LdGJrtXFV/EFLSf+4J0EMhYAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="slack-jenkins-install"
        title=""
        src="/static/d065e62af3c1907875fac47f12969ad8/5a190/slack-jenkins-install.png"
        srcset="/static/d065e62af3c1907875fac47f12969ad8/772e8/slack-jenkins-install.png 200w,
/static/d065e62af3c1907875fac47f12969ad8/e17e5/slack-jenkins-install.png 400w,
/static/d065e62af3c1907875fac47f12969ad8/5a190/slack-jenkins-install.png 800w,
/static/d065e62af3c1907875fac47f12969ad8/159fb/slack-jenkins-install.png 1019w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>Jenkins CI 통합 앱 추가 버튼 선택 시 나오는 설정 지침의 <strong>3 단계에서 팀 하위 도메인(Team Domain), 통합 토큰 자격 증명 ID(Integration Token) 를 별도로 복사해둔다.</strong>(젠킨스 설정에 사용)</li>
<li>젠킨스에서 젠킨스 관리 - 플러그인 관리 - 설치 가능 페이지에서 slack 을 검색해서 설치한다.

  <a
    class="gatsby-resp-image-link"
    href="/static/b8a003926a03fae3af213e10a13a130f/29229/slack-notification.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 20.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAL5JREFUeNql0M0KgkAUBeB541bteo6W/UCUlpVpWRRCRVZKYdAqgqhWYdRSmhn1NBomrbvwMZxhFnMPYYwhlk4QBPhnyPlyRX84gbW0UarWkcsXoBtjjM0ZzOkCc2uNtbPFyt5kRE7vnI375e72IIfjCc2OhoqsolhuoCYpaLZ7gvbV6mTiLCs9yOKNpKjoagZUfSgY0AYjECo2jMRXb56H++MJ3/fF2lzUQBOcM3D2Eecw/K0kisLkpPSV1PUG+ekcpMwdL8MAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="slack-notification"
        title=""
        src="/static/b8a003926a03fae3af213e10a13a130f/5a190/slack-notification.png"
        srcset="/static/b8a003926a03fae3af213e10a13a130f/772e8/slack-notification.png 200w,
/static/b8a003926a03fae3af213e10a13a130f/e17e5/slack-notification.png 400w,
/static/b8a003926a03fae3af213e10a13a130f/5a190/slack-notification.png 800w,
/static/b8a003926a03fae3af213e10a13a130f/29229/slack-notification.png 1167w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>메인 페이지의 젠킨스 관리 - 시스템 설정으로 이동</li>
<li>
<p>Slack 메뉴에서 slack 에서 복사한 팀 하위 도메인, 통합 토큰을 입력한다.</p>
<ul>
<li>Workspace 에는 팀 하위 도메인 입력</li>
<li>Default channel / member id 는 slack 웹사이트 상에서 선택한 jenkins 알람을 받을 채널명

  <a
    class="gatsby-resp-image-link"
    href="/static/021192ec8adfe9ca5dc6e18a9f5b4b3a/4dba2/jenkins-slack-conf.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 37%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAI5JREFUeNqdUcsOwyAMy/9/KqMgaEopLy/pY9ptGpYsOATHNmSMQc4ZYwz03qcpAuBcQNZahBCg6K1NiTXhEK7pAKkYbxs4pWvTBMZ97qWBvPdQLs7hKOUaEPv/UnFGVodK7bGI4FRkqUoj76WCaq1gZsQYT9EZh88btybQ88OfPr7uP7u7Z9WheS1Sm8cbuJgotrcQMsYAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="jenkins-slack-conf"
        title=""
        src="/static/021192ec8adfe9ca5dc6e18a9f5b4b3a/5a190/jenkins-slack-conf.png"
        srcset="/static/021192ec8adfe9ca5dc6e18a9f5b4b3a/772e8/jenkins-slack-conf.png 200w,
/static/021192ec8adfe9ca5dc6e18a9f5b4b3a/e17e5/jenkins-slack-conf.png 400w,
/static/021192ec8adfe9ca5dc6e18a9f5b4b3a/5a190/jenkins-slack-conf.png 800w,
/static/021192ec8adfe9ca5dc6e18a9f5b4b3a/4dba2/jenkins-slack-conf.png 1151w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>Credential</li>
<li>kind: Secret text</li>
<li>Secret: 통합 토큰 자격 증명</li>
<li>ID: 식별자이기 때문에 원하는 이름을 적는다.

  <a
    class="gatsby-resp-image-link"
    href="/static/8aa8d31e2c881c2cc29905e4a05b9e3a/0d6fe/slack-credential.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAOlJREFUeNqlktkOgkAMRef/P01kjz4oGjWAsgzDsD5eWyIGjUSJDydN6Ew5tyA2Wx+WbRMOXM+DsTaxNk04rgvLsuH5PlaGgdP5gii+IoziGSLE1BfB4Ygg2GO321MNUJYltNZDnaKU+gkRhiHSNEWSJMiyDF3XfaTv+3ke/aauIXgQG/Cltm2HxtzQb2hdQbCVlBI1TeeoI0uG9496zSkyx2WKonjZRdM0T+tf4LMsJfI8HwzZarqXpXFbQo2Rq6oaHrDVFH7zWOeYnrtJipxRXDb852OMhjdZQhSK/jNS5co7eLdcAt+/A4y/+tBLbxlAAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="slack-credential"
        title=""
        src="/static/8aa8d31e2c881c2cc29905e4a05b9e3a/5a190/slack-credential.png"
        srcset="/static/8aa8d31e2c881c2cc29905e4a05b9e3a/772e8/slack-credential.png 200w,
/static/8aa8d31e2c881c2cc29905e4a05b9e3a/e17e5/slack-credential.png 400w,
/static/8aa8d31e2c881c2cc29905e4a05b9e3a/5a190/slack-credential.png 800w,
/static/8aa8d31e2c881c2cc29905e4a05b9e3a/0d6fe/slack-credential.png 1115w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
</ul>
</li>
<li>Test Connection 을 선택해서 성공하면 slack 채널에 다음과 같은 메시지가 나타난다.

  <a
    class="gatsby-resp-image-link"
    href="/static/23279b9bf2683fc7eab8cfa227f33f2c/bb9c5/slack-jenkins-test.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 521px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAI1JREFUeNqVjs0KwjAQhPP+DyF4931qiSB11Zq2aaU1/zFjkoPg0YHZj9nDMExtK4g3GIRA13VYlieMMbDW4l+llMAGIhz2O7TXM9rmCM5PoPwjulRKKTGOI4QYMGU+5IrbrNDPL9yzadrQL6qWFbFyfLZ5B8QY4ZyrLgu11j+50gUYF2F8YYAu2cdv4QfmfeaXGCa41gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="slack-jenkins-test"
        title=""
        src="/static/23279b9bf2683fc7eab8cfa227f33f2c/bb9c5/slack-jenkins-test.png"
        srcset="/static/23279b9bf2683fc7eab8cfa227f33f2c/772e8/slack-jenkins-test.png 200w,
/static/23279b9bf2683fc7eab8cfa227f33f2c/e17e5/slack-jenkins-test.png 400w,
/static/23279b9bf2683fc7eab8cfa227f33f2c/bb9c5/slack-jenkins-test.png 521w"
        sizes="(max-width: 521px) 100vw, 521px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>젠킨스에서 일반적인 아이템으로 만들었을 경우에는 빌드 후 조치 메뉴에서 slack 알림 설정이 손쉽게 가능하지만 pipeline 을 선택할 경우에는 Jenkinsfile 에 별도로 작성해야 한다.</li>
<li>그런 불편함에도 pipeline 으로 아이템을 생성하는 이유는 Jenkinsfile 로 빌드 - 테스트 - 도커라이징 - 배포로 이어지는 과정을 Jenkinsfile 을 통해 코드로 관리 할 수 있기 때문이라고 생각한다.</li>
</ul>
<br>
<h3>5. Dockerfile 작성하기</h3>
<ul>
<li>
<p>springBoot 2.3 부터 gradle 에서 bootBuildImage 라는 task 로 Dockerfile 없이 docker image 생성이 가능하다.</p>
<ul>
<li>하지만 docker image 의 이름을 변경하는 것 정도의 설정 말고는 별도의 custom 이 불가능하다.</li>
</ul>
</li>
<li>
<p>별도의 Dockerfile 들을 작성하는 이유</p>
<ul>
<li>docker-compose 로 db, springBoot app 모든 것들을 한번에 띄우려고 했지만 db container 가 뜨기 전에 springBoot app 이 실행 되면서 db connection 이 되지 않는 문제 발생.</li>
<li>위의 문제를 해결하기 위해 dockerize 로 db container 가 실행 된 후 실행하려 했지만 bootBuildImage 로 만든 이미지는 커스텀 설정이 불가능한 것 같다.</li>
</ul>
</li>
<li>
<p>Dockerfile 에 넣기 위해 build.gradle 설정하기</p>
<ul>
<li>build 할 때 lib 부분과 application 부분을 분리해서 빌드한다.</li>
<li>
<div class="gatsby-highlight" data-language="properties"><pre class="language-properties"><code class="language-properties"><span class="token attr-name">//라이브러리</span> <span class="token attr-value">디렉토리 분리</span>
<span class="token attr-name">task</span> <span class="token attr-value">moveLib {</span>
<span class="token attr-name">  doLast</span> <span class="token attr-value">{</span>
<span class="token attr-name">      def</span> <span class="token attr-value">unpackDir = "$buildDir/unpack"</span>
<span class="token attr-name">      copy</span> <span class="token attr-value">{</span>
<span class="token attr-name">          from</span> <span class="token attr-value">file("${unpackDir}/app/BOOT-INF/lib")</span>
<span class="token attr-name">          into</span> <span class="token attr-value">file("${unpackDir}/lib")</span>
      }
  }
}
<span class="token attr-name">//jar</span> <span class="token attr-value">파일을 복사해서 unpack/app 디렉토리로 이동</span>
<span class="token attr-name">task</span> <span class="token attr-value">unpackJar(type: Copy) {</span>
<span class="token attr-name">  def</span> <span class="token attr-value">unpackDir = "$buildDir/unpack"</span>

<span class="token attr-name">      delete</span> <span class="token attr-value">unpackDir</span>
<span class="token attr-name">      from</span> <span class="token attr-value">zipTree(bootJar.getArchiveFile())</span>
<span class="token attr-name">      into</span> <span class="token attr-value">"$unpackDir/app"</span>

<span class="token attr-name">      finalizedBy</span> <span class="token attr-value">moveLib</span>
 }

<span class="token attr-name">build</span> <span class="token attr-value">{</span>
<span class="token attr-name">    finalizedBy</span> <span class="token attr-value">unpackJar</span>
}</code></pre></div>
</li>
</ul>
</li>
<li>
<p>docker image 만들기</p>
<ul>
<li>하나의 Dockerfile 로 태그명과 copy 하는 데이터만 다르게 해서 springBoot app 들의 이미지를 만들 수도 있을거 같은데.. 각 서비스에서 별도의 설정이 필요할까봐 일단 각각의 서비스별로 Dockerfile 작성</li>
<li>
<div class="gatsby-highlight" data-language="dockerfile"><pre class="language-dockerfile"><code class="language-dockerfile"><span class="token instruction"><span class="token keyword">FROM</span> openjdk:11-jre-slim</span>

<span class="token instruction"><span class="token keyword">ENV</span> DOCKERIZE_VERSION v0.6.1</span>
<span class="token instruction"><span class="token keyword">ENV</span> DB_CONTAINER_NAME db</span>

<span class="token instruction"><span class="token keyword">RUN</span> apt-get update -y &amp;&amp; apt-get install -y wget &amp;&amp; <span class="token operator">\</span>
wget https://github.com/jwilder/dockerize/releases/download/<span class="token variable">$DOCKERIZE_VERSION</span>/dockerize-alpine-linux-amd64-<span class="token variable">$DOCKERIZE_VERSION</span>.tar.gz <span class="token operator">\</span>
&amp;&amp; tar -C /usr/local/bin -xzvf dockerize-alpine-linux-amd64-<span class="token variable">$DOCKERIZE_VERSION</span>.tar.gz <span class="token operator">\</span>
&amp;&amp; rm dockerize-alpine-linux-amd64-<span class="token variable">$DOCKERIZE_VERSION</span>.tar.gz</span>

<span class="token instruction"><span class="token keyword">WORKDIR</span> /root</span>

<span class="token instruction"><span class="token keyword">ARG</span> buildDir=build/unpack</span>

<span class="token instruction"><span class="token keyword">COPY</span> <span class="token variable">${buildDir}</span>/lib BOOT-INF/lib</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token variable">${buildDir}</span>/app .</span>

<span class="token instruction"><span class="token keyword">CMD</span> dockerize -wait tcp://<span class="token variable">$DB_CONTAINER_NAME</span>:3306 -timeout 10s java -Dspring.profiles.active=<span class="token variable">${USER_PROFILE}</span> org.springframework.boot.loader.JarLauncher</span></code></pre></div>
</li>
<li>DB_CONTAINER_NAME: springBoot app 이 db container 보다 먼저 실행되는것을 막기 위해 CMD 에서 dockerize 명령으로 wait 할 db 컨테이너명을 적어준다.</li>
<li>USER_PROFILE: docker-compose 파일을 통해 환경변수로 받는 active profile 명이다.</li>
<li>
<p>COPY 를 2개로 분리하는 이유</p>
<ul>
<li>Dockerfile 을 만드는 과정에서 레이어를  생성하는데 COPY 하나당 하나의 레이어가 생성된다.</li>
<li>레이어는 도커 이미지를 만들 때 재사용이 가능한데 이렇게 app 영역과 lib 영역을 나누면 도커 이미지를 만드는 과정에서 캐시된 레이어를 재사용 할 수 있다.</li>
</ul>
</li>
<li>
<p>Dockerfile 작성 순서</p>
<ul>
<li>Dockerfile 을 위와 같은 순서로 작성한 이유는 일단 한 번 캐싱을 사용할 수 없는 구간이 발생하면, in order 로 진행되는 Docker 의 빌드 특성상 그 아래 모든 레이어는 캐싱을 사용할 수 없기 때문이다.</li>
<li>만약 dockerize 를 다운받는 RUN 구문이 COPY 다음에 있고, 소스 코드의 변경이 발생한다면 COPY ${buildDir}/app . 부분에서 변경이 발생해서 캐시된 레이어를 사용하지 않고, 그 다음 RUN 구문에서도 캐시를
사용하지 않게 된다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>
<h3>6. docker-compose file 작성하기</h3>
<ul>
<li>docker-compose file 은 로컬 개발환경용과 배포할 개발서버용을 따로 만들어서 사용했다. 로컬에서는 db, flyway 등 개발에 필요한 환경 구성용이고,
개발환경용은 개발에 필요한 환경과 springBoot app 을 컨테이너로 실행하는 환경까지 포함하고 있다.</li>
<li>
<p>.env</p>
<ul>
<li>
<p>docker-compose 파일에서 사용할 환경변수 목록</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token assign-left variable">USER_PROFILE_DEVELOP</span><span class="token operator">=</span>dev
<span class="token assign-left variable">USER_PROFILE_PRODUCT</span><span class="token operator">=</span>prod</code></pre></div>
</li>
</ul>
</li>
<li>
<p>docker-compose-dev.yml</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
<span class="token key atrule">db</span><span class="token punctuation">:</span>
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> maria<span class="token punctuation">-</span>db
  <span class="token key atrule">image</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">:</span>10.6.4
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> MARIADB_DATABASE=spring
    <span class="token punctuation">-</span> MARIADB_ALLOW_EMPTY_ROOT_PASSWORD=yes
    <span class="token punctuation">-</span> TZ=Asia/Seoul
    <span class="token punctuation">-</span> LANG=C.UTF<span class="token punctuation">-</span><span class="token number">8</span>
  <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>character<span class="token punctuation">-</span>set<span class="token punctuation">-</span>server=utf8mb4 <span class="token punctuation">-</span><span class="token punctuation">-</span>collation<span class="token punctuation">-</span>server=utf8mb4_unicode_ci
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">"3306:3306"</span>
<span class="token key atrule">migration</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> flyway/flyway<span class="token punctuation">:</span>8.0.4
  <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>configFiles=/flyway/conf/flyway.config <span class="token punctuation">-</span>connectRetries=60 migrate
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ./flyway/migration/main<span class="token punctuation">:</span>/flyway/main
    <span class="token punctuation">-</span> ./flyway/conf/develop.conf<span class="token punctuation">:</span>/flyway/conf/flyway.config
  <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> db
<span class="token key atrule">admin</span><span class="token punctuation">:</span>
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> app<span class="token punctuation">-</span>admin
  <span class="token key atrule">build</span><span class="token punctuation">:</span> ./admin
  <span class="token key atrule">image</span><span class="token punctuation">:</span> app<span class="token punctuation">-</span>admin
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> USER_PROFILE=$<span class="token punctuation">{</span>USER_PROFILE_DEVELOP<span class="token punctuation">}</span>
  <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> db
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">"9090:8080"</span>
<span class="token key atrule">user</span><span class="token punctuation">:</span>
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> app<span class="token punctuation">-</span>user
  <span class="token key atrule">build</span><span class="token punctuation">:</span> ./user
  <span class="token key atrule">image</span><span class="token punctuation">:</span> app<span class="token punctuation">-</span>user
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> USER_PROFILE=$<span class="token punctuation">{</span>USER_PROFILE_DEVELOP<span class="token punctuation">}</span>
  <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> db
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">"8081:8080"</span></code></pre></div>
</li>
<li>
<p>flyway 설정</p>
<ul>
<li>로컬 개발환경에서는 버전관리하는 스크립트와 반복적으로 실행될 seed 를 모두 migration 해주고, 개발 환경에서는 버전관리용 스크립트만 실행하도록 했다.</li>
<li>위의 docker-compose-dev 파일에서는 별도로 분리한 conf 파일중 develop.conf 파일을 사용하도록 했다.</li>
<li>로컬(local.conf)</li>
<li>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">flyway.url<span class="token operator">=</span>jdbc:mariadb://db:3306/spring
flyway.user<span class="token operator">=</span>root
flyway.password<span class="token operator">=</span>
flyway.locations<span class="token operator">=</span>filesystem:/flyway/main,filesystem:/flyway/seed</code></pre></div>
</li>
<li>개발환경(develop.conf)</li>
<li>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">flyway.url<span class="token operator">=</span>jdbc:mariadb://db:3306/spring
flyway.user<span class="token operator">=</span>root
flyway.password<span class="token operator">=</span>
flyway.locations<span class="token operator">=</span>filesystem:/flyway/main</code></pre></div>
</li>
</ul>
</li>
<li>
<p>springBoot profile 설정</p>
<ul>
<li>개발환경에서는 db 와 springBoot app 이 docker compose 로 같이 실행되면서 같은 네트워크를 사용하게 된다. 이때 <strong>springBoot app 에서는 db connection 을 localhost 가 아닌
db 의 서비스명을 적어줘야 한다.</strong></li>
<li>그래서 다음과 같이 local 과 dev 환경의 profile 을 분리했다.</li>
<li>
<p>local</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token key atrule">profiles</span><span class="token punctuation">:</span>
 <span class="token key atrule">group</span><span class="token punctuation">:</span>
   <span class="token key atrule">"dev"</span> <span class="token punctuation">:</span> <span class="token string">"dev"</span>
<span class="token key atrule">datasource</span><span class="token punctuation">:</span>
 <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> org.mariadb.jdbc.Driver
 <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mariadb<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/spring
 <span class="token key atrule">username</span><span class="token punctuation">:</span> root
 <span class="token key atrule">password</span><span class="token punctuation">:</span>
 <span class="token key atrule">hikari</span><span class="token punctuation">:</span>
   <span class="token key atrule">maximum-pool-size</span><span class="token punctuation">:</span> <span class="token number">5</span>
   <span class="token key atrule">minimum-idle</span><span class="token punctuation">:</span> <span class="token number">3</span></code></pre></div>
</li>
<li>
<p>dev</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token key atrule">datasource</span><span class="token punctuation">:</span>
 <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> org.mariadb.jdbc.Driver
 <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mariadb<span class="token punctuation">:</span>//db<span class="token punctuation">:</span>3306/spring
 <span class="token key atrule">username</span><span class="token punctuation">:</span> root
 <span class="token key atrule">password</span><span class="token punctuation">:</span>
 <span class="token key atrule">hikari</span><span class="token punctuation">:</span>
   <span class="token key atrule">maximum-pool-size</span><span class="token punctuation">:</span> <span class="token number">5</span>
   <span class="token key atrule">minimum-idle</span><span class="token punctuation">:</span> <span class="token number">3</span></code></pre></div>
</li>
</ul>
</li>
<li>
<p>로컬에서 build &#x26; docker-compose 실행</p>
<ul>
<li>Jenkinsfile 을 작성하기전에 로컬에서 docker-compose file 이 잘 실행되는지 테스트 한다.(프로젝트 root 경로에서 실행)</li>
<li>
<p>window 환경이라면 ./gradlew 가 아니라 gradlew.bat 파일로 실행해야 한다.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">docker-compose -f docker-compose-dev.yml up -d db migration
./gradlew clean build
docker-compose -f docker-compose-dev.yml build
docker-compose -f docker-compose-dev.yml up -d</code></pre></div>
</li>
</ul>
</li>
</ul>
<br>
<h3>7. Jenkinsfile 작성하기</h3>
<ul>
<li>
<p>젠킨스의 빌드 기록의 빌드 목록중에서 화살표를 눌러 Replay 를 선택해서 아래의 스크립트를 넣어서 실행시켜 본다.

  <a
    class="gatsby-resp-image-link"
    href="/static/8b037d78f519e47c2e33c3fbd2d57995/5f6dd/jenkins-replay.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 57.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAa1JREFUeNqNUotu01AMvf//P0C3dh0CrYINoW5d2ZrSpHl0yda8y27eOdheO0AaMEtHx/Hx9bVvrLIkhNYabdui73tUpUZKsSRJEIYhoihCXddgY/1/UN6dB12UqJpWkOc5HNuCaVrwPE/ARbMsQ5qm2O12wi+BzyrPv0dw/4Ddo0bddoiTFOv1GrZtC9g3TfMZlmUJr1Yr8ZkP367rQoXbrYzX0chsfNNiscByuYRhLIVfA8Mw4DgOVBzHKIsCXdc9Fcxy6cx1HUlgdg9MHTh77Q+dfYoHvg91Fzwgoa6q/cN7Gx9vB0McjcYYnZzieHSKwXCMwfGJYDh+L7F3RyPK2esUf0NnPp1/4TcMEMYpHosKRVVjE2wxuZhiNr/Fh/NLnH2+wNfpFS5n3wSz+Q2uSWOeXl1TbC74OJnAtGyoDRWM01wK/tClQNdP41c9EEdb+sMpXjKSsU9FrgthxeM2tC5d16Old+x+A1sR0QZQQf5pHGtoE2rKL+tGfOZaVo61FqppGvzNuIPFaoNby0ecabzGVFVVsuF8+4F/+T1u1gFm332EafEc6/7BPwH2CDo9XWxktwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="jenkins-replay"
        title=""
        src="/static/8b037d78f519e47c2e33c3fbd2d57995/5a190/jenkins-replay.png"
        srcset="/static/8b037d78f519e47c2e33c3fbd2d57995/772e8/jenkins-replay.png 200w,
/static/8b037d78f519e47c2e33c3fbd2d57995/e17e5/jenkins-replay.png 400w,
/static/8b037d78f519e47c2e33c3fbd2d57995/5a190/jenkins-replay.png 800w,
/static/8b037d78f519e47c2e33c3fbd2d57995/5f6dd/jenkins-replay.png 1139w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">pipeline <span class="token punctuation">{</span>
agent any
stages <span class="token punctuation">{</span>
    stage<span class="token punctuation">(</span><span class="token string">'Gradle test'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        steps <span class="token punctuation">{</span>
            script <span class="token punctuation">{</span>
                try <span class="token punctuation">{</span>
                    <span class="token function">sh</span> <span class="token string">'chmod 755 ./gradlew'</span>
                    <span class="token function">sh</span> <span class="token string">'docker-compose -f docker-compose-dev.yml down'</span>
                    <span class="token function">sh</span> <span class="token string">'docker-compose -f docker-compose-dev.yml up -d db migration'</span>
                    <span class="token function">sh</span> <span class="token string">'./gradlew clean build'</span>
                <span class="token punctuation">}</span> catch <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">sh</span> <span class="token string">'echo Gradle test Fail!!!'</span>
                    slackSend <span class="token punctuation">(</span>channel: <span class="token string">'#jenkins-test'</span>, color: <span class="token string">'#FF0000'</span>, message: <span class="token string">"FAILED: Job '<span class="token variable">${env.JOB_NAME}</span> [<span class="token variable">${env.BUILD_NUMBER}</span>]' (<span class="token variable">${env.BUILD_URL}</span>)"</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    stage<span class="token punctuation">(</span><span class="token string">'Dockerfile build'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        steps <span class="token punctuation">{</span>
            script <span class="token punctuation">{</span>
                try <span class="token punctuation">{</span>
                    <span class="token function">sh</span> <span class="token string">'docker-compose -f docker-compose-dev.yml build'</span>
                <span class="token punctuation">}</span> catch <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">sh</span> <span class="token string">'echo Dockerfile build Fail!!!'</span>
                    slackSend <span class="token punctuation">(</span>channel: <span class="token string">'#jenkins-test'</span>, color: <span class="token string">'#FF0000'</span>, message: <span class="token string">"FAILED: Job '<span class="token variable">${env.JOB_NAME}</span> [<span class="token variable">${env.BUILD_NUMBER}</span>]' (<span class="token variable">${env.BUILD_URL}</span>)"</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    stage<span class="token punctuation">(</span><span class="token string">'Docker-compose'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        steps <span class="token punctuation">{</span>
            script <span class="token punctuation">{</span>
                try <span class="token punctuation">{</span>
                    <span class="token function">sh</span> <span class="token string">'docker-compose -f docker-compose-dev.yml up -d'</span>
                    slackSend <span class="token punctuation">(</span>channel: <span class="token string">'#jenkins-test'</span>, color: <span class="token string">'#00FF00'</span>, message: <span class="token string">"SUCCESSFUL: Job '<span class="token variable">${env.JOB_NAME}</span> [<span class="token variable">${env.BUILD_NUMBER}</span>]' (<span class="token variable">${env.BUILD_URL}</span>)"</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> catch <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">sh</span> <span class="token string">'echo Docker-compose Fail!!!'</span>
                    slackSend <span class="token punctuation">(</span>channel: <span class="token string">'#jenkins-test'</span>, color: <span class="token string">'#FF0000'</span>, message: <span class="token string">"FAILED: Job '<span class="token variable">${env.JOB_NAME}</span> [<span class="token variable">${env.BUILD_NUMBER}</span>]' (<span class="token variable">${env.BUILD_URL}</span>)"</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
</li>
<li>성공했다면 다음과 같은 메시지를 slack 에서 확인 할 수 있다.

  <a
    class="gatsby-resp-image-link"
    href="/static/aa081ef38ddd3994d6fe98d59cc1775e/442cb/jenkins-success.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 752px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 9.499999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAGhJREFUeNpVjdsKg0AMRP3/DyxIoYK+rGjiJchK0t0xW7fQBg6HmYdJ8+qe6PsB67JCRKCqMDOYW4vf6YPaDzWXPueMcl837fhACKMTwMxYHHKYCORPSE6wRMx7xLTfppq340RO6W/wAuCfmqLAXdtgAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="jenkins-success"
        title=""
        src="/static/aa081ef38ddd3994d6fe98d59cc1775e/442cb/jenkins-success.png"
        srcset="/static/aa081ef38ddd3994d6fe98d59cc1775e/772e8/jenkins-success.png 200w,
/static/aa081ef38ddd3994d6fe98d59cc1775e/e17e5/jenkins-success.png 400w,
/static/aa081ef38ddd3994d6fe98d59cc1775e/442cb/jenkins-success.png 752w"
        sizes="(max-width: 752px) 100vw, 752px"
      />
    </span>
  </span>
  
  </a>
    </li>
</ul>
<br>
<h3>8. 테스트</h3>
<ul>
<li>위에서 테스트에 성공한 스크립트를 github 저장소의 Jenkinsfile 에 추가해서 커밋 &#x26; 푸쉬한다.</li>
<li>repository webhook 확인

  <a
    class="gatsby-resp-image-link"
    href="/static/8566673d58873504de49fe213131116f/64d87/test-webhook.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 33.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAANNJREFUeNqVkd1ugzAMRnn/V9zFCqSwH1IgIXFMSL7FKb3bqtXSkWIrOvosN2+fjE5HfM0OSil0vcJ1GPF+aTHpG6Ryzv+mocDgPcJ7wuYc7OYQ44HjENJLsio0dsMeI4y1WFZThVlS1WR4UQg0ow3oZ4/rShgtYzDSO7Ta4sPQU6lsIZsJgfmecFh9FQgiVYuvXKaHMD8X0ikMp1AVSbcQ+lUIJ4S2pB5LWvmUfuEhJAqgEMod9rvw5hjTFiq6vPXZfxdmz39eWSqlBC6rCrHcQeY/NA8i4VDXUOAAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="test-webhook"
        title=""
        src="/static/8566673d58873504de49fe213131116f/5a190/test-webhook.png"
        srcset="/static/8566673d58873504de49fe213131116f/772e8/test-webhook.png 200w,
/static/8566673d58873504de49fe213131116f/e17e5/test-webhook.png 400w,
/static/8566673d58873504de49fe213131116f/5a190/test-webhook.png 800w,
/static/8566673d58873504de49fe213131116f/64d87/test-webhook.png 818w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>jenkins 빌드기록 확인

  <a
    class="gatsby-resp-image-link"
    href="/static/d902bb3aaab1d51816203053f2ccdeb5/fe9e8/test-jenkins-build.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 64.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAjZJREFUeNqFU4tunDAQ5P8/LlHTu3IH4f3GYAzmYQzcdHGUtkmVdqWVdldiPLM7WLcoQMtbsJZDrRqr3rAfB9I0hW3biKIIvu/DcRzkeYEzHo8HvgrrmxOgITC5KMh5gZwWjFRvm8amNR7HTvUGTfW+778Av0rLC310xPDzq/MkwLsWYjmg9+O/QL8BgxjLPOP4Y3hGVVWI44RW0f1T4l+S0zCB4BzLsnzYT98PxJwT08n0alXI8gwT9fu+mZyXGXKUZh2iF2YlVpxlEF2HdV0/yHqPcz6Tgl70cO4OWN2gYR14K1CXNeIwxkCPs4qRUgXr7ofgvIP6xHCYFMqyQhgGEEKg6mp4lYe4TeCxFGGbIeEJAhYiFzkKWYBPHTEk20gpMQzywy6WdSO7BLg7d9MzxXAbbwhUgHiLTPqLD3d2EekY0RGB7Q0s2/URJhmqhkOMM0pGnuSCLKRoLz3GaTSAzdrCkQ7CJYQ3epT0naJ69pDoFOkjRbu3sBz3FR1JatuWbNKZPIGEnFAzZuZaaeRDjgu/wOkdA/hKeRN3XPkP07uTi3IpCTDwjG3qukbTNOZSZ/JeoqJZURQY5Ug7i/BUPOHCLrgT6J3AXuoXPBfPsPkN39sL0jGDdfNcTONEByjBiNH5V5wp5EzsONmnN5Lrpca1v+J18hCsAcI1hDu6sHv7TfrqodY1GTsK6cLKSOtI7jvDg/7n05tKqberrxLFVBjgRpN11gbVXKGciYhqwDTDoAf8BEWM4EnFwcg/AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"
        alt="test-jenkins-build"
        title=""
        src="/static/d902bb3aaab1d51816203053f2ccdeb5/5a190/test-jenkins-build.png"
        srcset="/static/d902bb3aaab1d51816203053f2ccdeb5/772e8/test-jenkins-build.png 200w,
/static/d902bb3aaab1d51816203053f2ccdeb5/e17e5/test-jenkins-build.png 400w,
/static/d902bb3aaab1d51816203053f2ccdeb5/5a190/test-jenkins-build.png 800w,
/static/d902bb3aaab1d51816203053f2ccdeb5/fe9e8/test-jenkins-build.png 1146w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </li>
<li>slack 채널 메시지 확인</li>
<li>
<p>docker-compose 파일에 설정한 springBoot app 이 정상적으로 실행되었는지 확인</p>
<ul>
<li><a href="http://localhost:9090/admin">http://localhost:9090/admin</a> , <a href="http://localhost:8081/user">http://localhost:8081/user</a> 2개의 요청이 정상적인 값을 리턴하는지 확인</li>
</ul>
</li>
</ul>
<h3>TODO</h3>
<ul>
<li>
<p>jenkins, slack, docker 를 이용해서 기본적인 빌드 &#x26; 배포 과정을 테스트 해보았지만 아래와 같은 것들을 더 공부해봐야 할 것 같다.</p>
<ul>
<li>gradle build test 를 위한 별도의 db 컨테이너 사용하기</li>
<li>서비스를 중단하지 않고, 무중단 배포하기</li>
<li>springBoot app 이 정상적으로 실행되었는지 Jenkinsfile 에서 확인후 slack 으로 알림</li>
<li>배포가 실패할 경우 브랜치에 푸쉬한 사람을 특정해서 slack 또는 메일 알림 보내주기</li>
<li>docker build 후에 사용하지 않는 도커 레이어들을 정리하기</li>
</ul>
</li>
</ul></div><footer><div class="author"><div class="avatar"><img src="https://avatars.githubusercontent.com/u/6446144?v=4" alt="삽질저장소"/></div><div class="note"><p>🔘 안되면 될 때 까지! 🏃 🔘</p></div></div><div class="links"><a href="/intellij-mac-keymap/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></svg><h4>intellij mac 단축키<!-- --> <time>2021-12-29<!-- --> </time></h4></a><a href="/toby-spring-vol1-ch2/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"></path></svg><h4>토비의 스프링 3.1(vol1) - 2장 테스트<!-- --> <time>2021-04-25</time></h4></a></div><div></div></footer></article></main><footer class="footer"><ul>
<li>Thank You for Visiting My Blog, Have a Good Day 😆 <br />© 2021 Developer <a href="https://github.com/">shPark</a>, Powered By Gatsby.</li>
</ul></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/jenkins-build-deploy/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-16797aeb1857e4bdc070.js"],"app":["/app-cc3235dd701427d7b59f.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-36dc033f967ae9fe9cda.js"],"component---src-pages-404-js":["/component---src-pages-404-js-29ccc9f03a886ed7280f.js"],"component---src-pages-category-js":["/component---src-pages-category-js-59a162261b03ed3f2568.js"],"component---src-pages-index-js":["/component---src-pages-index-js-a8d612587fa3df8ca80e.js"],"component---src-pages-search-js":["/component---src-pages-search-js-d6c22e90e502c95f5fcc.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-c1d37a996bae6e29cb78.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-67b3bc047f385a030f3d.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-dd92b58e687c0d5ee5f5.js"]};/*]]>*/</script><script src="/polyfill-16797aeb1857e4bdc070.js" nomodule=""></script><script src="/component---src-templates-post-template-js-dd92b58e687c0d5ee5f5.js" async=""></script><script src="/3df72598ed628fa3b584613cd093848b9c087970-7e8ab1b1cd93282549c1.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-cc3235dd701427d7b59f.js" async=""></script><script src="/1bfc9850-d06e3c25ea137ea82c47.js" async=""></script><script src="/framework-acd7498685eeb36e39da.js" async=""></script><script src="/webpack-runtime-e1f2b59f9e542546e6c7.js" async=""></script></body></html>