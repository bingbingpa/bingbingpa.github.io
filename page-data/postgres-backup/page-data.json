{"componentChunkName":"component---src-templates-post-template-js","path":"/postgres-backup/","result":{"data":{"post":{"id":"259717fd-f6c7-5487-8ef2-cdb342ed8460","html":"<h2>postgresql 백업하기!</h2>\n<ul>\n<li>\n<p>같은 버전의 DB 같은 경우에는 pg_dump로 손쉽게 sql 파일로 백업이 가능</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">pg<span class=\"token operator\">-</span><span class=\"token keyword\">dump</span> <span class=\"token string\">\"DB명\"</span> <span class=\"token operator\">></span> <span class=\"token string\">\"백업파일명\"</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">sql</span></code></pre></div>\n</li>\n<li>특정 테이블만 백업할 경우에는 -t 옵션을 사용하고 원격 서버의 DB를 백업할 경우에는 -h 옵션을 사용하고 원격서버 ip를 입력한다.</li>\n<li>나같은 경우에는 접속한 DB서버와 원격 DB서버의 버전이 달라서 copy 명령을 통해 csv파일로 복사 후에 해당 파일을 import 했다.</li>\n<li>\n<p>psql -h “원격서버IP” -U “유저명” 으로 접속 후 패스워드 입력!</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">\\copy <span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT QUERY\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">to</span> <span class=\"token string\">\"/저장할 경로.csv\"</span> CSV HEADER<span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>이렇게 하면 쿼리 결과가 해당 경로에 csv 파일로 떨어지고 해당 파일을 import 할 수 있다.</li>\n<li>참고로 <strong>postgresql에서는 select * from information<em>schema.columns where table</em>name=‘테이블명’;</strong> 쿼리로 해당 테이블의 스키마를 조회 할 수 있다.</li>\n<li><strong>[참고]</strong> psql에서 \\t를 하면 쿼리 결과를 보기 좋다.</li>\n</ul>","fields":{"slug":"/postgres-backup/","prefix":"2019-07-15"},"frontmatter":{"title":"postgresql pg-dump","category":"database"}},"authornote":{"id":"265dda60-7971-5464-926f-ea569c79ac0a","html":"<p>🔘 안되면 될 때 까지! 🏃 🔘</p>"}},"pageContext":{"slug":"/postgres-backup/","prev":{"id":"5a52af12-8b85-5d2b-b1be-1c65b50a9301","fields":{"slug":"/ubuntu-vscode/","prefix":"2019-07-14","source":"posts"},"frontmatter":{"title":"Ubuntu vscode 한글 관련 오류 해결","category":"ide"}},"next":{"id":"e0727a67-6887-5b0f-a744-94a31313541e","fields":{"slug":"/centos-visudo/","prefix":"2019-07-21","source":"posts"},"frontmatter":{"title":"user 계정 sudo 권한","category":"infra"}},"source":"posts"}},"staticQueryHashes":["960164547","960164547"]}