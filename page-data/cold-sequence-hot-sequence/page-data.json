{"componentChunkName":"component---src-templates-post-template-js","path":"/cold-sequence-hot-sequence/","result":{"data":{"post":{"id":"4419c6cf-e117-5d52-8004-8fff2dc20861","html":"<h1>📘 스프링으로 시작하는 리액티브 프로그래밍 챕터 7</h1>\n<br>\n<h3>Cold Sequence</h3>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/29d79491a56656bbfbba047f9b4af16c/44fd6/cold-sequence.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 789px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDUlEQVR42mVS227TQBT0//8BL7wh8VgJAihENC0gREvVkJZAc2lzt2PHjr32Xr3r4dhBJFGPdOTdI+9ozsx4SkgoY1Aslsip67MxGn6Y43G+g9EKWhvELMY0fIJSCorugqdg2xFE/V7pZs65gMfDCMo6xN0LrDqfwEsLayS+93ycfRwTIIeWJYbrP3h7c0ZAEkIasGSG+d0rpBmju0TBOZIkhVcJAUssDIASx+WoKzwbHZW2eFZe5geYr30E3Uv4n7+ioHWMFrj+uca77gRacShhMFwN0e59aNYquEKWLLB6aDUMObHL84IY7uAFiwUYDfh4AjYa7VlWFqutxOBxh6oqG6JMxvi9vIct97SsZoiX3xp96z0syVbr6AWbDbI0O3Cuqv2i2Q4QeTMyBLKJ1P9fMpFix7N/vzvI3IezGs5V8CQJWq/BiHK+jZsuCCB408Ki3YF0Fn6Q4MXrAZbrDTGz+PJwifbte5JCI00TzPsvEQVPiBMG70RRW8KpPZPapFPNTy079kuaI1PqHAlyWhCQoa8/m2FNUYqvrhHe9qCdwzZmaJ1PsaVYuNLhfn6Hm9EPMs+iKBj8yTlYGpJBBTxDQS7LElIqRJuQqAeQtDLr95H8GjRJKQqJi6tVI0td42BIoH2QfGSKRDTtoGBbwjCUw9oE6ho4jCLSK6Dw8kP03Gke9/fDuX578NPhLxeeSR5JTdISAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"cold-sequence\"\n        title=\"\"\n        src=\"/static/29d79491a56656bbfbba047f9b4af16c/44fd6/cold-sequence.png\"\n        srcset=\"/static/29d79491a56656bbfbba047f9b4af16c/772e8/cold-sequence.png 200w,\n/static/29d79491a56656bbfbba047f9b4af16c/e17e5/cold-sequence.png 400w,\n/static/29d79491a56656bbfbba047f9b4af16c/44fd6/cold-sequence.png 789w\"\n        sizes=\"(max-width: 789px) 100vw, 789px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>Subscriber 가 구독할 때마다 데이터 흐름이 처음부터 다시 시작되는 sequence 이다.</li>\n<li>마블 다이어그램을 보면 위쪽에 위치한 Subscriber A 가 구독을 하면 Publisher 는 네 개의 데이터를 emit 한다. 그리고 아래쪽에 위치한 Subscriber B\n가 구독을 해도 역시 네 개의 데이터를 emit 한다.</li>\n<li>A, B 의 구독 시점이 다르지만 모두 동일한 데이터를 전달받는다.</li>\n<li>이처럼 Subscriber 의 구독 시점이 달라도 구독을 할 때마다 Publisher 가 데이터를 emit 하는 과정을 처음부터 다시 시작하는 데이터의 흐름을\nCold Sequence 라고 부른다.</li>\n<li>예를 들면 현실 세계에서 오프라인으로 월간 잡지의 발행이 1월부터 시작되었고, 구독자가 5월부터 잡지를 구독했는데 1월달 잡지부터 모두 보내주는 경우와 같다고 할 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> coldFlux <span class=\"token operator\">=</span> Flux\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fromIterable</span><span class=\"token punctuation\">(</span><span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"KOREA\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"JAPAN\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"CHINESE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>String<span class=\"token operator\">::</span>lowercase<span class=\"token punctuation\">)</span>\n\n    coldFlux<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span> <span class=\"token punctuation\">{</span> country <span class=\"token operator\">-></span> logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"# Subscriber1: <span class=\"token interpolation variable\">$country</span>\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"-------------------------\"</span><span class=\"token punctuation\">)</span>\n    Thread<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000L</span><span class=\"token punctuation\">)</span>\n    coldFlux<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span> <span class=\"token punctuation\">{</span> country <span class=\"token operator\">-></span> logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"# Subscriber2: <span class=\"token interpolation variable\">$country</span>\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/075a76eb4341d344dfe01f7e992227c5/2d7ab/cold-sequnece-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 526px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAz0lEQVR42mWRx40FMQxDXckAk3PO039fXDx++LQHQSZpUZIdzvPUvu9a19Vx37fmeRb8tm3O8Nd1aVkW5XmuYRiMj+Pwnb7vfU7TVAGDKFL4PI8LyXDoFIHJWZZpHEdjNBpi+H2f6rpWaNtWRNM0DrqTI991nYMicFEUqqrK9+DhyrJ0tuE0TRYpIMBcJIOZJmIya9EQjBYHQEuS5Lcyq/GOxPu+/1aGjyszIWZgnoqVMaYOLfBufAKXCEzoCo8xJmRM0fkUpokfgsaEGFP3B8VXuUTTINX3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"cold-sequence-sample\"\n        title=\"\"\n        src=\"/static/075a76eb4341d344dfe01f7e992227c5/2d7ab/cold-sequnece-sample.png\"\n        srcset=\"/static/075a76eb4341d344dfe01f7e992227c5/772e8/cold-sequnece-sample.png 200w,\n/static/075a76eb4341d344dfe01f7e992227c5/e17e5/cold-sequnece-sample.png 400w,\n/static/075a76eb4341d344dfe01f7e992227c5/2d7ab/cold-sequnece-sample.png 526w\"\n        sizes=\"(max-width: 526px) 100vw, 526px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>코드 실행 결과를 보면 구독이 발생할 때마다 emit 된 데이터를 처음부터 다시 전달받고 있음을 확인할 수 있다.</li>\n</ul>\n<h3>Hot Sequence</h3>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f58a11cb64128f8cc27c1724d03ff5e/44fd6/hot-sequence.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 789px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSklEQVR42lWRW2vcMBBG/f9/Ril96FPekxbyUpoQSKCQBsLa3ayz9jprZ23rYl2sk7FLIBkYNJLmjL4ZZc45Fp+spf19jT4e8TEyx8Bj0XH3tyFFj5sc2hpuNtf0qicsXEgMxwe6+h7nE0opMj0qbNdhjaU+v+C0r9ACe2f583Dg1+0zoX/FDiODVlze/+TYNkxti/XQ7W9pdjcoE+j7ngyxIInOO2zik6U5/A+WDiRnnhPvR9FovDBe9vMHJrPacChLdtsnyi9fafMCJQqDN1xe7Ti72OCHV57yf1RNzferbxxeKk51zbZ8oSl+sH88Z1CBVlRnZflMkedoKeylLS9q4jyLmpnJRYE7tkVBXdUEme1oRvZVRbHJ6Zf8acTo06o+yn1mjFmHOU0TMaUVCiGsPi+x9yit5cGlRS9jSFj5wIVZ1hjT6u/MG89kyZEFomwNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"hot-sequence\"\n        title=\"\"\n        src=\"/static/0f58a11cb64128f8cc27c1724d03ff5e/44fd6/hot-sequence.png\"\n        srcset=\"/static/0f58a11cb64128f8cc27c1724d03ff5e/772e8/hot-sequence.png 200w,\n/static/0f58a11cb64128f8cc27c1724d03ff5e/e17e5/hot-sequence.png 400w,\n/static/0f58a11cb64128f8cc27c1724d03ff5e/44fd6/hot-sequence.png 789w\"\n        sizes=\"(max-width: 789px) 100vw, 789px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>Cold Sequence 는 구독이 발생할 때마다 Sequence 의 타임라인이 처음부터 새로 시작하기 때문에 Subscriber 는 구독 시점과 상관없이\n데이터를 처음부터 다시 전달받을 수 있다.</li>\n<li>반면에 Hot Sequence 는 구독이 발생한 시점 이전에 Publisher 로부터 emit 된 데이터는 Subscriber 가 전달받지 못하고\n구독이 발생한 시점 이후에 emit 된 데이터만 전달받을 수 있다.</li>\n<li>\n<p>마블 다이어그램을 보면 세 번의 구독이 발생했지만 타임라인은 하나밖에 생성되지 않은것을 볼 수 있다.</p>\n<ul>\n<li>Hot sequence 는 구독이 아무리 많이 발생해도 Publisher 가 데이터를 처음부터 emit 하지 않는다.</li>\n</ul>\n</li>\n<li>예를 들면 현실 세계에서 오프라인으로 월간 잡지의 발행이 1월부터 시작되었고, 구독자가 5월부터 잡지를 구독했다면 1월달 잡지부터 모두 보내주는 것이 아니라\n5월달 잡지부터 보내주는 경우와 같다고 할 수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> singers <span class=\"token operator\">=</span> <span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Singer A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Singer B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Singer C\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Singer D\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Singer E\"</span><span class=\"token punctuation\">)</span>\n    logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"# Begin concert:\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">val</span> concertFlux <span class=\"token operator\">=</span> Flux\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fromArray</span><span class=\"token punctuation\">(</span>singers<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">delayElements</span><span class=\"token punctuation\">(</span>Duration<span class=\"token punctuation\">.</span><span class=\"token function\">ofSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 데이터 소스로 입력된 각 데이터의 emit 을 일정시간 동안 지연시키는 오퍼레이터</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">share</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// cold sequence 를 hot sequence 로 동작하게 해주는 오퍼레이터</span>\n\n    concertFlux<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span> <span class=\"token punctuation\">{</span> singer <span class=\"token operator\">-></span> logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"# Subscriber1 is watching <span class=\"token interpolation\"><span class=\"token delimiter variable\">${</span>singer<span class=\"token delimiter variable\">}</span></span>'s song\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n    Thread<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2500L</span><span class=\"token punctuation\">)</span>\n\n    concertFlux<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span> <span class=\"token punctuation\">{</span> singer <span class=\"token operator\">-></span> logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"# Subscriber2 is watching <span class=\"token interpolation\"><span class=\"token delimiter variable\">${</span>singer<span class=\"token delimiter variable\">}</span></span>'s song\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n    Thread<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000L</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9954941378bf365eee8f530135b3c47a/01dae/hot-sequence-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 721px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvUlEQVR42m2QVw6EQAxDuQoMTXQY+v3vldWLZMSu9iNKcex4Jtm2zWKMtiyLZ2Jd1yfGcbSu6xynZlbXtaVpamVZWp7nVhSF5yzLLEGQRQjUkCFJnBl9CMGmafJ+33cbhsHu+/b6PE/ngyeQKOZ5dgEE5ViuwXDDYR1qmsbFtdP3vXPdocR0Wa4IZmBVVfkePTgC13X5znEcjnHwcUj8OmRJmX/imBy2bfvlUH/998nUEtOT34LM34K4BIP7AXrlu8NTvCRkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"hot-sequence-sample\"\n        title=\"\"\n        src=\"/static/9954941378bf365eee8f530135b3c47a/01dae/hot-sequence-sample.png\"\n        srcset=\"/static/9954941378bf365eee8f530135b3c47a/772e8/hot-sequence-sample.png 200w,\n/static/9954941378bf365eee8f530135b3c47a/e17e5/hot-sequence-sample.png 400w,\n/static/9954941378bf365eee8f530135b3c47a/01dae/hot-sequence-sample.png 721w\"\n        sizes=\"(max-width: 721px) 100vw, 721px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>코드 실행 결과를 보면 첫 번째 구독에서는 원본 Flux 에서 emit 한 데이터를 모두 전달받아서 출력하는 것을 볼 수 있다.</li>\n<li>\n<p>두 번째 구독의 경우, 원본 Flux 가 emit 한 데이터 중에서 Singer A, Singer B 는 전달받지 못하는 것을 확인할 수 있다.</p>\n<ul>\n<li>sleep 2.5초 뒤에 두 번째 구독이 발생했기 때문에 2.5초의 지연 시간 동안 원본 Flux 가 이미 Singer A, Singer B 데이터를 emit 하기 때문이다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li><a href=\"https://github.com/bingbingpa/dev-book/tree/main/spring-reactive/src/main/kotlin/me/bingbingpa/ch07\">사용한 샘플 코드</a></li>\n</ul>","fields":{"slug":"/cold-sequence-hot-sequence/","prefix":"2024-03-05"},"frontmatter":{"title":"Cold Sequence 와 Hot Sequence","category":"spring-reactive"}},"authornote":{"id":"265dda60-7971-5464-926f-ea569c79ac0a","html":"<p>🔘 안되면 될 때 까지! 🏃 🔘</p>"}},"pageContext":{"slug":"/cold-sequence-hot-sequence/","prev":{"id":"d7680e79-1629-5994-8919-8e4d9414f98a","fields":{"slug":"/reactor-marble-diagram/","prefix":"2024-02-22","source":"posts"},"frontmatter":{"title":"Reactor 특징과 마블다이어그램","category":"spring-reactive"}},"source":"posts"}},"staticQueryHashes":["960164547","960164547"]}