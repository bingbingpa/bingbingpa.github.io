{"componentChunkName":"component---src-templates-post-template-js","path":"/rsync/","result":{"data":{"post":{"id":"d0ee5bb7-20dd-56e2-be3c-2bdcb030a202","html":"<h2>1. ssh ì„¤ì •</h2>\n<ul>\n<li>\n<p>rsyncë¥¼ í†µí•œ íŒŒì¼ ë™ê¸°í™”ë¥¼ ìŠ¤ì¼€ì¤„ì„ ì‹¤í–‰í•´ ê°™ì€ ì‹œê°„ì— ë°˜ë³µì ìœ¼ë¡œ ëŒë¦´ ê²½ìš° ì›ê²© ì„œë²„ ì ‘ì†ì‹œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë¬»ê²Œ ë˜ë¯€ë¡œ ssh keyë¥¼ ì„¤ì •í•˜ì—¬ ìŠ¤ì¼€ì¤„ì„ ì‹¤í–‰ í•  ë•Œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì ‘ì†í•˜ë„ë¡ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ ssh-keygen</code></pre></div>\n</li>\n<li>\n<p>ì…ë ¥ì°½ì— ì—”í„°ë¥¼ ì³ì„œ keyë¥¼ ìƒì„±í•˜ê³  ìƒì„±ëœ keyë¥¼ ë™ê¸°í™”ì— ì‚¬ìš©í•  ì„œë²„ì— ì¹´í”¼í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ ssh-copy-id -i id_rsa.pub <span class=\"token string\">\"ì›ê²©ì ‘ì†ê³„ì •\"</span>@<span class=\"token string\">\"ì›ê²©ì ‘ì†IP\"</span></code></pre></div>\n</li>\n<li>\n<p>sshì˜ ì»¤ë„¥ì…˜ ì‹œê°„ì„ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">&lt;</span>Master<span class=\"token operator\">></span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/ssh/ssh_config\nHost *\n  ServerAliveInterval <span class=\"token number\">60</span>\n  ServerAliveCountMax <span class=\"token number\">6</span>\n\n<span class=\"token operator\">&lt;</span>Slave<span class=\"token punctuation\">(</span>ë™ê¸°í™”í•  ì›ê²©ì„œë²„<span class=\"token punctuation\">)</span><span class=\"token operator\">></span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/ssh/ssh_config\nHost *\n  ClientAliveInterval <span class=\"token number\">60</span>\n  ClientAliveCountMax <span class=\"token number\">6</span></code></pre></div>\n</li>\n<li>\n<p>ì›ê²© ì„œë²„ì— sshë¡œ ì ‘ì†í•´ì„œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë¬»ì§€ ì•Šê³  ë°”ë¡œ ì ‘ì†ì´ ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•´ë³¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">ssh</span> <span class=\"token string\">\"ì›ê²©ì ‘ì†ê³„ì •\"</span>@<span class=\"token string\">\"ì›ê²©ì ‘ì†IP\"</span></code></pre></div>\n</li>\n</ul>\n<h2>2. rsync ì„¤ì¹˜</h2>\n<ul>\n<li>\n<p>master ì„œë²„ì™€ slave ì„œë²„ì— ëª¨ë‘ rsyncë¥¼ ì„¤ì¹˜ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> <span class=\"token function\">rsync</span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">service</span> rsyncd start</code></pre></div>\n</li>\n<li>master/slave ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ rsync ë°ëª¬ì´ ì‹¤í–‰ì¤‘ì¸ì§€ statusë¥¼ í™•ì¸ í•œë‹¤(sudo service rsyncd status)</li>\n</ul>\n<h2>3. ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ í™•ì¸</h2>\n<ul>\n<li>rsyncë¡œ íŒŒì¼ ë™ê¸°í™”ì‹œì— ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ì„ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ ì „ì†¡ë˜ëŠ” íŒŒì¼ì˜ í¬ê¸°ê°€ í´ ê²½ìš° rsyncê°€ ë§ì€ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ì„ í™•ì¸í•˜ê³  ì ì ˆí•˜ê²Œ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì˜ limitë¥¼ ì„¤ì •í•œë‹¤.</li>\n<li>ì„ì˜ì˜ íŒŒì¼ì„ í•˜ë‚˜ ìƒì„±í•˜ê³  rsyncë¡œ ì›ê²© ì„œë²„ì— ë™ê¸°í™” í•˜ëŠ” ì‹œê°„ì„ ì‚´í´ë³¸ë‹¤.</li>\n<li>\n<p>íŒŒì¼ ì „ì†¡ì— ê±¸ë¦¬ëŠ” ì´ˆë‹¹ ì‹œê°„ì„ í™•ì¸í•˜ê³  rsyncì˜ ì „ì†¡ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ì„ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">dd</span> <span class=\"token assign-left variable\">if</span><span class=\"token operator\">=</span>/dev/zero <span class=\"token assign-left variable\">of</span><span class=\"token operator\">=</span><span class=\"token string\">\"íŒŒì¼ëª…\"</span> <span class=\"token assign-left variable\">count</span><span class=\"token operator\">=</span><span class=\"token number\">1024000</span> <span class=\"token assign-left variable\">bs</span><span class=\"token operator\">=</span><span class=\"token number\">1024</span>\n$ <span class=\"token function\">time</span> <span class=\"token function\">rsync</span> -v <span class=\"token string\">\"ìƒì„±í•œíŒŒì¼\"</span> <span class=\"token string\">\"ì›ê²©ì ‘ì†ê³„ì •\"</span>@<span class=\"token string\">\"ì›ê²© ì„œë²„\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"íŒŒì¼ìƒì„±ìœ„ì¹˜\"</span></code></pre></div>\n</li>\n</ul>\n<h2>4. ìŠ¤ì¼€ì¤„ë§</h2>\n<ul>\n<li>\n<p>crontabì„ ì´ìš©í•˜ì—¬ ë§¤ì¼ ê°™ì€ ì‹œê°„ì— ë™ê¸°í™”ê°€ ë˜ë„ë¡ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ã€€* * * * * <span class=\"token string\">\"ì‹¤í–‰í•  ì»¤ë§¨ë“œ\"</span></code></pre></div>\n</li>\n<li>ê°ê° ë¶„, ì‹œê°„, ì¼, ì›”, ìš”ì¼ì„ ì˜ë¯¸í•˜ë©° ê°œí–‰ì„ í•˜ì§€ ì•Šê³  í•œì¤„ì— ëª¨ë‘ ì¨ì•¼ í•œë‹¤.</li>\n<li>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Field</th>\n<th align=\"center\">Description</th>\n<th align=\"center\">Allowed Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">MIN</td>\n<td align=\"center\">Minute field</td>\n<td align=\"center\">0 to 59</td>\n</tr>\n<tr>\n<td align=\"center\">HOUR</td>\n<td align=\"center\">Hour field</td>\n<td align=\"center\">0 to 23</td>\n</tr>\n<tr>\n<td align=\"center\">DOM</td>\n<td align=\"center\">Day of Month</td>\n<td align=\"center\">1-31</td>\n</tr>\n<tr>\n<td align=\"center\">MON</td>\n<td align=\"center\">Month field</td>\n<td align=\"center\">1-12</td>\n</tr>\n<tr>\n<td align=\"center\">DOW</td>\n<td align=\"center\">Day Of Week</td>\n<td align=\"center\">0-6</td>\n</tr>\n<tr>\n<td align=\"center\">CMD</td>\n<td align=\"center\">Command</td>\n<td align=\"center\">Any command to be executed.</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>crontab -e ë¥¼ ì»¤ë§¨ë“œì°½ì— ì…ë ¥í•˜ì—¬ ì…ë ¥ì°½ì´ ë‚˜ì˜¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">crontab</span> -e\nã€€* 00 * * * <span class=\"token function\">rsync</span> -avz --delete --bwlimit<span class=\"token operator\">=</span><span class=\"token string\">\"ë„¤íŠ¸ì›Œí¬ëŒ€ì—­í­\"</span> --log-file<span class=\"token operator\">=</span><span class=\"token string\">\"ë¡œê·¸íŒŒì¼ìœ„ì¹˜\"</span> <span class=\"token string\">\"masterë™ê¸°í™”ê²½ë¡œ\"</span> <span class=\"token string\">\"ì›ê²©ì ‘ì†ê³„ì •\"</span>@<span class=\"token string\">\"ì›ê²©ì ‘ì†IP\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"slaveë™ê¸°í™”ê²½ë¡œ\"</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">:wq<span class=\"token punctuation\">(</span>ì €ì¥<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>ìœ„ì— ì„¤ì •í•œ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. ë§¤ì¼ 00ì‹œì— í•´ë‹¹ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ì—¬ masterì™€ slaveì˜ ë””ë ‰í† ë¦¬ë¥¼ ë™ê¸°í™”í•˜ê³  ë¡œê·¸íŒŒì¼ì€ ì§€ì •í•œ ìœ„ì¹˜ì— ìƒì„±ë˜ê³  bwlimitì˜µì…˜ì— ì„¤ì •í•œ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ìœ¼ë¡œ í•´ë‹¹ íŒŒì¼ë“¤ì„ ì „ì†¡í•˜ë©°, â€”deleteì˜µì…˜ì— ì˜í•´ materì—ì„œ ì‚­ì œëœ íŒŒì¼ì€ slaveì—ì„œ ì‚­ì œë˜ê²Œ ëœë‹¤.</li>\n</ul>","fields":{"slug":"/rsync/","prefix":"2019-08-17"},"frontmatter":{"title":"rsyncë¥¼ ì´ìš©í•œ íŒŒì¼ ë™ê¸°í™”","category":"infra"}},"authornote":{"id":"265dda60-7971-5464-926f-ea569c79ac0a","html":"<p>ğŸ”˜ ì•ˆë˜ë©´ ë  ë•Œ ê¹Œì§€! ğŸƒ ğŸ”˜</p>"}},"pageContext":{"slug":"/rsync/","prev":{"id":"e0d2d227-4d88-52d2-ad45-681aab57f7b5","fields":{"slug":"/postgresql-replication/","prefix":"2019-08-17","source":"posts"},"frontmatter":{"title":"postgreSQL Replication","category":"database"}},"next":{"id":"2d75ed06-3c2c-5fca-a0a3-1607ca61e39f","fields":{"slug":"/ubuntu-jdk/","prefix":"2019-08-18","source":"posts"},"frontmatter":{"title":"Ubuntu java ë²„ì „ ë³€ê²½í•˜ê¸°","category":"infra"}},"source":"posts"}},"staticQueryHashes":["960164547","960164547"]}