{"componentChunkName":"component---src-templates-post-template-js","path":"/spring-redis/","result":{"data":{"post":{"id":"bf2eae6a-444a-51bc-a8ab-d2b482574a5a","html":"<h3>1. Springboot Redis ì„¸ì…˜ í´ëŸ¬ìŠ¤í„°ë§ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ </h3>\n<ul>\n<li>ì„œë²„ê°€ í•œëŒ€ì¼ ê²½ìš° WASì— ì„¸ì…˜ ì •ë³´ë¥¼ ë‹´ì•„ë‘ê³  ì‚¬ìš©í•˜ë©´ ë˜ì§€ë§Œ ì„œë²„ê°€ NëŒ€ë¡œ ëŠ˜ì–´ë‚  ê²½ìš° ëŠ˜ì–´ë‚œ ì„œë²„ì˜ ip, port ì •ë³´ë¥¼ NëŒ€ì˜ ì„œë²„ì— ì¼ì¼ì´ ì…ë ¥í•´ì¤˜ì•¼ í•œë‹¤. ë”°ë¼ì„œ WASê°€ ì œê³µí•˜ëŠ” ì„¸ì…˜ í´ëŸ¬ìŠ¤í„°ë§ ê¸°ëŠ¥ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ì €ì¥ì†Œë¥¼ ë‘ê³  ì„¸ì…˜ ì •ë³´ë¥¼ ë‘ê³  ê³µìœ í•˜ê²Œ ë˜ë©´ ì„œë²„ê°€ ëŠ˜ì–´ë‚˜ë„ ì €ì¥ì†Œ ì •ë³´ë§Œ ê³µìœ í•´ì£¼ë©´ ëœë‹¤.</li>\n<li>ì„¸ì…˜ì„ ê³µìœ í•˜ê¸° ìœ„í•œ ì €ì¥ì†Œë¡œëŠ” Redisë¥¼ ë§ì´ ì´ìš©í•œë‹¤. RedisëŠ” ë°ì´í„° ì €ì¥ì†Œë¡œ ê°€ì¥ I/O ì†ë„ê°€ ë¹ ë¥¸ ì¥ì¹˜ì¸ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê³  êµ¬ì¡°ì ìœ¼ë¡œëŠ” key, value í˜•ì‹ì˜ ë°ì´í„° ì²˜ë¦¬ì— íŠ¹í™”ë˜ì–´ ìˆë‹¤.</li>\n</ul>\n<h3>2. ì„¸ì…˜ ê³µìœ  ì‹œë‚˜ë¦¬ì˜¤</h3>\n<ul>\n<li>ê°ê°ì˜ ì„œë²„ì—ëŠ” ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ 1, 2, 3, ì´ ìˆê³  ê°ê°ì˜ ì„¸ì…˜ì€ ì—°ë™ë˜ì–´ í•œ ê³³ì—ì„œ ë¡œê·¸ì¸ ì‹œì— ë‹¤ë¥¸ ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì„¸ì…˜ì„ ê³µìœ í•˜ì—¬ ë¡œê·¸ì¸/ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ë¥¼ í•´ì•¼ í•œë‹¤.</li>\n<li>ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ 1,2,3ìˆëŠ” ì„œë²„ NëŒ€ê°€ ìˆê³  ì•ìª½ì—ì„œ L4ë‚˜ nginx, HAproxyë“±ìœ¼ë¡œ ë¶€í•˜ë¶„ì‚° ì²˜ë¦¬ë¥¼ í•´ì£¼ê³  NëŒ€ì˜ ì„œë²„ëŠ” ì„¸ì…˜ì„ ê³µìœ  í•˜ì—¬ ë¡œê·¸ì¸ / ë¡œê·¸ì•„ì›ƒì„ ì²˜ë¦¬ í•´ì•¼ í•œë‹¤.</li>\n</ul>\n<h3>3. Redis ì„¤ì¹˜ ë° ì„œë¹„ìŠ¤ ë“±ë¡</h3>\n<ul>\n<li>RedisëŠ” ê³µì‹ì ìœ¼ë¡œ ìœˆë„ìš°ë¥¼ ì§€ì›í•˜ì§€ ì•Šê³ , <a href=\"https://github.com/MicrosoftArchive/redis/releases\">MSOpenTech</a>ë¼ëŠ” ê³³ì—ì„œ ì§€ì†ì ìœ¼ë¡œ ìœˆë„ìš° ë²„ì „ì„ ë¦´ë¦¬ì¦ˆ í•˜ê³  ìˆë‹¤.</li>\n<li>ë³„ë„ì˜ ì¸ìŠ¤í†¨ì€ í•„ìš”í•˜ì§€ ì•Šê³  í•´ë‹¹ zipíŒŒì¼ì„ ë°›ì•„ì„œ confíŒŒì¼ì„ ê°ìì˜ ì„¤ì •ì— ë§ê²Œ ìˆ˜ì • í›„ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡ í›„ ì‹œì‘í•´ì£¼ë©´ ëœë‹¤.</li>\n<li>ê¸°ë³¸í¬íŠ¸ëŠ” 6379ë²ˆì´ê³  í¬íŠ¸ë¥¼ í¬í•¨í•œ ì„¤ì •ì •ë³´ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ redis.windows.conf íŒŒì¼ì„ ìˆ˜ì •í•˜ë©´ ëœë‹¤.</li>\n<li>\n<p>ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•˜ê³  redis ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">redis-server --service-install redis.windows.conf --loglevel verbose\nredis-server --service-start</code></pre></div>\n</li>\n<li>clië¡œ ì ‘ì†í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ ì ‘ì†ì´ ë˜ëŠ”ì§€ í™•ì¸.(ì•„ì§ springbootì— redis ì„¤ì •ì„ í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ì•„ë¬´ê²ƒë„ ì—†ë‹¤.)</li>\n<li>\n<p>redis-cli</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token number\">127.0</span>.0.1:637<span class=\"token operator\"><span class=\"token file-descriptor important\">9</span>></span>\n<span class=\"token number\">127.0</span>.0.1:637<span class=\"token operator\"><span class=\"token file-descriptor important\">9</span>></span> keys *\n<span class=\"token punctuation\">(</span>empty list or <span class=\"token builtin class-name\">set</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>flushall : ëª¨ë“  ì„¸ì…˜ ì •ë³´ ì´ˆê¸°í™”</li>\n<li>keys * : ëª¨ë“  ì„¸ì…˜ ì •ë³´ ì¡°íšŒ</li>\n<li>get â€œkeyâ€ : í•´ë‹¹ í‚¤ì˜ ì„¸ì…˜ ì •ë³´ ì¡°íšŒ</li>\n</ul>\n<h3>4. build.gradle ì„¤ì •</h3>\n<ul>\n<li>\n<p>redis sessionì„ ì‚¬ìš© í•  ìˆ˜ ìˆë„ë¡ ë””íœë˜ì‹œ ì¶”ê°€</p>\n<div class=\"gatsby-highlight\" data-language=\"properties\"><pre class=\"language-properties\"><code class=\"language-properties\"><span class=\"token attr-name\">compile('org.springframework.session</span><span class=\"token punctuation\">:</span><span class=\"token attr-value\">spring-session-data-redis')</span></code></pre></div>\n</li>\n</ul>\n<h3>5. RedisConfig íŒŒì¼ ì¶”ê°€</h3>\n<ul>\n<li>redis ì—°ê²°ì •ë³´ì™€ RedisTemplateì„ Beanìœ¼ë¡œ ì¶”ê°€í•œë‹¤.</li>\n<li>\n<p>redisConnectionFactoryë¡œëŠ” Jedis ë³´ë‹¤ Lettuceê°€ ë” ë‚«ë‹¤ëŠ” ê¸€ë“¤ì´ ë§ì•„ì„œ Lettuce ì‚¬ìš©.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableRedisRepositories</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisConfig</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisConnectionFactory</span> <span class=\"token function\">redisConnectionFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">LettuceConnectionFactory</span> lettuceConnectionFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LettuceConnectionFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> lettuceConnectionFactory<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">redisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span><span class=\"token function\">redisConnectionFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setValueSerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Jackson2JsonRedisSerializer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyDto</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h3>6. Sessionì— ë‹´ì•„ì¤„ Dtoì— Serializable ì¶”ê°€</h3>\n<ul>\n<li>Dtoë¥¼  Serializable í•˜ì§€ ì•Šì„ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•˜ë‹ˆ ê¼­ Serializableì„ ì¶”ê°€í•´ì•¼í•œë‹¤.</li>\n<li><strong>DefaultSerializer requires a Serializable payload but received an object of type [MyDto]</strong></li>\n<li>ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ 1,2,3ì—ì„œ ì„¸ì…˜ì„ ê³µìœ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ê° ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ serialVersionUIDëŠ” ë™ì¼í•˜ê²Œ ì„¤ì •í•´ì•¼ í•œë‹¤.</li>\n</ul>\n<h3>7. session í™•ì¸ í›„ ë¡œê·¸ì¸ ì²˜ë¦¬</h3>\n<ul>\n<li>\n<p>ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ë¡œê·¸ì¸ì‹œì— í•´ë‹¹ sessionì„ redis ì„¤ì •í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ë¼ë¦¬ ê³µìœ í•˜ë¯€ë¡œ session ì •ë³´ë¥¼ í™•ì¸ í›„ ë¡œê·¸ì¸ ì²˜ë¦¬ ë˜ëŠ” loginí˜ì´ì§€ë¡œ ì´ë™í•˜ë„ë¡ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LoginController</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">/**\n* ë¡œê·¸ì¸ í™”ë©´\n* @return\n*/</span>\n<span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Model</span> model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">//ì‚¬ìš©ì ì •ë³´ê°€ ìˆì„ ê²½ìš° ë°”ë¡œ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™</span>\n    <span class=\"token class-name\">MyDto</span> session <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">MyDto</span><span class=\"token punctuation\">)</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyDto</span><span class=\"token punctuation\">.</span>KEY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>session <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"redirect:/main/\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    model<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loginForm\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyDto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"/login/login\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h3>8. í™•ì¸</h3>\n<ul>\n<li>ê° ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì ‘ì†ì‹œ ì„¸ì…˜ì´ ê³µìœ ë˜ì–´ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒì´ ì •ìƒì ìœ¼ë¡œ ë˜ëŠ”ì§€ í™•ì¸</li>\n</ul>","fields":{"slug":"/spring-redis/","prefix":"2019-11-08"},"frontmatter":{"title":"Springboot Redis ì„¸ì…˜ ê³µìœ ","category":"spring"}},"authornote":{"id":"265dda60-7971-5464-926f-ea569c79ac0a","html":"<p>ğŸ”˜ ì•ˆë˜ë©´ ë  ë•Œ ê¹Œì§€! ğŸƒ ğŸ”˜</p>"}},"pageContext":{"slug":"/spring-redis/","prev":{"id":"2d75ed06-3c2c-5fca-a0a3-1607ca61e39f","fields":{"slug":"/ubuntu-jdk/","prefix":"2019-08-18","source":"posts"},"frontmatter":{"title":"Ubuntu java ë²„ì „ ë³€ê²½í•˜ê¸°","category":"infra"}},"next":{"id":"37f65b29-6044-5901-ae89-e92ea1bebda5","fields":{"slug":"/vscode-static-import/","prefix":"2019-12-05","source":"posts"},"frontmatter":{"title":"vscode lombok & static import ì„¤ì •","category":"ide"}},"source":"posts"}},"staticQueryHashes":["960164547","960164547"]}