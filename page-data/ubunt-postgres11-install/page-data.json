{"componentChunkName":"component---src-templates-post-template-js","path":"/ubunt-postgres11-install/","result":{"data":{"post":{"id":"200628de-104a-5197-ba7f-b35a06172b57","html":"<h4>1. 기존에 설치된 postgresql 삭제</h4>\n<ul>\n<li>기존 패키지가 깨끗하게 지워지지 않아서 dpkg를 이용해서 삭제했다. —purge 옵션으로 깨끗하게 삭제가 가능하다.</li>\n<li>\n<p>먼저 설치된 postgres 관련 항목들을 찾는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">dpkg -l <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> postgresql</code></pre></div>\n</li>\n<li>\n<p>검색되는 항목들을 모두 삭제한다. 내 경우에는 11, 12가 꼬여서 설치되서 일단 다 지우고 다시 설치하기로 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">apt</span> --purge remove postgresql-11 postgresql-11-postgis-2.5 postgresql-11-postgis-2.5-scripts postgresql-12 postgresql-12-postgis-3 postgresql-12-postgis-3-scripts postgresql-client-11 postgresql-client-12 postgresql-client-common postgresql-common</code></pre></div>\n</li>\n<li>삭제 후 다시 검색해서 설치된 패키지가 있는지 확인하고, 남아있는 폴더들을 삭제한다.</li>\n<li>우분투의 경우는 /var/lib/postgresql 아래에 해당 버전의 데이터 디렉토리가 생기고 /etc/postgresql/ 아래에 해당 버전의 설정 파일들이 생긴다.</li>\n</ul>\n<h4>2. postgresql &#x26; postgis 설치하기</h4>\n<ul>\n<li>\n<p>먼저 다음과 같이 postgresql 저장소를 추가해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">wget</span> --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> apt-key <span class=\"token function\">add</span> -</code></pre></div>\n</li>\n<li>\n<p>postgresql &#x26; postgis 설치하기</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y postgresql-12\n<span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y postgresql-12-postgis-3</code></pre></div>\n</li>\n<li>\n<p>다음 명령어로 5432(postgresql 기본포트)로 정상적으로 실행되고 있는지 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ss -tunelp <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token number\">5432</span></code></pre></div>\n</li>\n</ul>\n<h5>3. 패스워드 변경 및 확인</h5>\n<ul>\n<li>원격에서 접속이 필요하다면 postgresql.conf파일에 listen<em>address를 변경해주고 특정 ip만 허용하고자 한다면 pg</em>hab.conf 파일을 변경하도록 한다. 일단 나는 로컬에서만 사용할거기 때문에 별도의 설정은 하지 않았다. 만약 설정 파일을 변경한다면 서비스를 재시작해줘야 적용된다.</li>\n<li>\n<p>초기 설치시 postgres계정의 패스워드가 설정되어 있지 않으므로 postgres 계정으로 변경후 psql로 들어가서 패스워드를 변경해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">psql -U postgres</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">alter</span> <span class=\"token keyword\">user</span> postgres <span class=\"token keyword\">with</span> password <span class=\"token string\">'postgres'</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>패스워드 변경후 pgadmin으로 접속 또는 psql로 접속하여 postgis를 설치한다. 설치된 버전이 apt로 설치한 버전이 맞는지 확인하고 data_directory로 확인해 본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> extension postgis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">select</span> postgis_version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">show</span> data_directory<span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>","fields":{"slug":"/ubunt-postgres11-install/","prefix":"2020-02-29"},"frontmatter":{"title":"postgresql & postgis 설치하기","category":"database"}},"authornote":{"id":"8b2419cd-9b30-5409-9d2c-da10779777d4","html":"<p><strong>OpenSesame</strong></p>\n<ul>\n<li>안되면 될 때 까지!</li>\n<li>무분별한 정보 보다는 정확한 정보를 전달하도록 노력하기.</li>\n</ul>"}},"pageContext":{"slug":"/ubunt-postgres11-install/","prev":{"id":"07009461-0603-5563-8009-a8fecb8f7942","fields":{"slug":"/linux-directory/","prefix":"2020-02-28","source":"posts"},"frontmatter":{"title":"리눅스 디렉토리 구조 정리","category":"infra"}},"next":{"id":"f3496155-df36-5c71-b792-c4d1ac4d1876","fields":{"slug":"/maven-quick-start/","prefix":"2020-03-08","source":"posts"},"frontmatter":{"title":"maven 프로젝트 생성","category":"build-tool"}},"source":"posts"}},"staticQueryHashes":["960164547","960164547"]}