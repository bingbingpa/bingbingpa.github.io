{"componentChunkName":"component---src-templates-post-template-js","path":"/whiteship-live-study-week10/","result":{"data":{"post":{"id":"a408d132-f685-5fc3-b2b2-d5ea49c2deb8","html":"<h2>whiteship/live-study 10주차 정리</h2>\n<ul>\n<li>\n<p>목표</p>\n<ul>\n<li><a href=\"https://github.com/whiteship/live-study/issues/10\">자바의 멀티쓰레드 프로그래밍에 대해 학습하세요.</a></li>\n</ul>\n</li>\n<li>\n<p>학습할 것 (필수)</p>\n<ul>\n<li>Thread 클래스와 Runnable 인터페이스</li>\n<li>쓰레드의 상태</li>\n<li>쓰레드의 우선순위</li>\n<li>Main 쓰레드</li>\n<li>동기화</li>\n<li>데드락</li>\n</ul>\n</li>\n</ul>\n<br>\n<h3>1. Thread 클래스와 Runnable 인터페이스</h3>\n<ul>\n<li>\n<p>process &#x26; thread</p>\n<ul>\n<li>\n<p>process</p>\n<ul>\n<li>컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램</li>\n<li>메모리에 올라와 독립적으로 실행되고 있는 프로그램의 인스턴스</li>\n<li>각각의 프로세스가 운영체제로부터 CPU 자원, 독립된 메모리 영역등을 할당 받는다.\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8c54297dcd8ba2c7e9487fb2dbf09e42/053a9/process-flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 449px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 55.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSklEQVR42jWQXU/TUBiA96tIjPdeemOEgInhQ+scoBh0m8CAbBBhjG5d17Vr1xb31a/3Padbt3YsQRODCN6iMVEv/A1e+HHnmWhy8iYneZ7z5D2x74H/oz8+PwddNn+HwSdTf13YOy0enJf5S7V6UeZPS4VvndavsHuFXZFMjH0GetYh5xY5bcFZG9/b/odmu1dWaKWOZa0rGa6gjhT9i+28s+jFf4wpX4HGxIp3bc3lxOEDaTRd6F9PWyctP76HN1/0E8rJsnpyI9t9lMdXLTqRsmeLISeN5oVoIu2oMsQUGeLaINcZbJj+jjO8X/H7uvdcxHQryrzsbjeCVDtaF7zIwDmpl7OiMWZH8VqgK3/lGYGsyMjx7ccKuVPwQgOTAsQVmig7DwWbk2m66B6bOFnAlRrh+M5yFWaKMJZrMi4Zg51OsGbgrhvFJdrXYUMiGXuYOaKbDX/dijJlVoZ7crDrhGs67thhQuv9K98+xIQIC7yVkMjUvheZ+LQI8yLhSi5XcmbLJMW7oyO8tQ+LElng7UQFpgpXZQWfNMJ9t7dlegdkuKT4/TpkZJrD42wDc02SheNN0Qt19jVBAcNN083DYMVkO3tMhslDwp7kBEhU6XTeG5r4rMTKNC5CXMRZke3sjct5XJQow9icOgCDlStV4IzBVidYrVnbTjhXod26l6yQlDVM6l7axKQVpQQ30OGu3Mu64WrNZjCn9WpVL/amRVQN2yY26tA0UFfh0iHERFNHdm3qYOrgm/DRpaoKY0yHloGaBm/b5A9sV5RW8cA6YwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"process-flow\"\n        title=\"\"\n        src=\"/static/8c54297dcd8ba2c7e9487fb2dbf09e42/053a9/process-flow.png\"\n        srcset=\"/static/8c54297dcd8ba2c7e9487fb2dbf09e42/772e8/process-flow.png 200w,\n/static/8c54297dcd8ba2c7e9487fb2dbf09e42/e17e5/process-flow.png 400w,\n/static/8c54297dcd8ba2c7e9487fb2dbf09e42/053a9/process-flow.png 449w\"\n        sizes=\"(max-width: 449px) 100vw, 449px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n</ul>\n</li>\n<li>\n<p>thread</p>\n<ul>\n<li>process 내에서 실행되는 여러 흐름의 단위</li>\n<li>process 가 할당받은 자원을 이용하는 실행의 단위</li>\n<li>thread 는 프로세스 내에서 각각 stack 만 따로 할당받고 code, data, heap 영역을 공유한다.\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/daa0a5a759f3af2c570e31312753cbf2/6244b/thread-flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 446px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIklEQVR42m2PW08TURSF51cZI8VIK+gLMYDQRmOof8FEnd5N2umFMlhfbCOMFgidOdeZMx1a0qEIgqIRpS1tISa+mJggBKPR8OwZiAQTk/2wstb6zt5H6I+A07kaBmfaE9LGMsz/2Lqbs4Yk6glr/60JZ6o/Bs83BuP4tlz25xaHJHIeHojCf+DQfCWDKrEiypLqg+KiO6T5MiRNa+EiDT7HE3rtjkwvi+o9xZqkS4+KOA2tWKl6PQaFgQjwZak3S0dS0DtJbyTJxYdqXwSO5wz/FB6fwv4nzBOFF+6rgxL2yfpIEo5NkFuyfi0KhL4QGE2AlILSCk7NwLQC5SLm45NAr6j1BoA3AeQXjpNRUNIp4LSCxhKAg0KPCIqIHHfYQYN9b5lHTfNgm/3aMQij7jBwBTTM6HGbcZNHvHDYYL/bbIEQlwgEVwDMIcKt3Q3cWQPdV4iL/Y/MMIk7BHpEjTIn7a6j7hrcXUd7G/jbtqFRwkGBPzCLyI+W2VlZeGM+2zSn2/X5oybjzCmMDPKzZbbsuXeW8ppNc8H3l8gJzM8uYfJ5qwzqtrZkqZWyulzb2WSWRfivLomAmeTT+7JWX1YrplYtq3V7762B9ZOzOTyj4cMmq69aNZvaNq6tlL9sGVAnV4J8M1AJ2W+Y9qpl28TmhZfW1w/6LCQ8EjxhMByHgacokoeRAooWHBEuoFEJ8ojPTQmG8o4Z/ZsG82g47kR/AFh4iZhTSY+oAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"thread-flow\"\n        title=\"\"\n        src=\"/static/daa0a5a759f3af2c570e31312753cbf2/6244b/thread-flow.png\"\n        srcset=\"/static/daa0a5a759f3af2c570e31312753cbf2/772e8/thread-flow.png 200w,\n/static/daa0a5a759f3af2c570e31312753cbf2/e17e5/thread-flow.png 400w,\n/static/daa0a5a759f3af2c570e31312753cbf2/6244b/thread-flow.png 446w\"\n        sizes=\"(max-width: 446px) 100vw, 446px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n</ul>\n</li>\n</ul>\n</li>\n<li>thread 를 생성하는 방법에는 Runnable 인터페이스를 사용하거나 Thread 클래스를 사용하는 두 가지 방법이 있다.</li>\n<li>\n<p>Thread 를 상속 받으면, 다른 클래스를 상속받을 수 없기 때문에 인터페이스를 구현하는 방법이 더 일반적이다.</p>\n<ul>\n<li>\n<p>Runnable 인터페이스</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloRunnable</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloRunnable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token annotation punctuation\">@Override</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello from a thread!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>Thread 클래스</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloThread</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Thread</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token annotation punctuation\">@Override</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello from a thread!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>sleep()</p>\n<ul>\n<li>Thread.sleep 메소드는 쓰레드가 지정된 기간 동안 실행을 일시 중단하도록 한다.</li>\n<li>\n<p>sleep 메소드는 두 가지 오버로드 된 메소드를 제공하며, 하나는 밀리초로, 다른 하나는 나노초로 중단 시간을 지정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SleepMessages</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> importantInfo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token string\">\"Mares eat oats\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"Does eat oats\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"Little lambs eat ivy\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"A kid will eat ivy too\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> s <span class=\"token operator\">:</span> importantInfo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">//Pause for 4 seconds</span>\n          <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">4000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token comment\">//Print a message</span>\n          <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>interrupt()</p>\n<ul>\n<li>현재 수행중인 쓰레드를 중단시킨다.</li>\n<li>그냥 중지 시키지 않고 InterruptedException 예외를 발생시키면서 중단시킨다.</li>\n</ul>\n</li>\n<li>\n<p>join()</p>\n<ul>\n<li>일정 시간 동안 특정 쓰레드가 작업하는 것을 기다리게 만든다.\n<br></li>\n</ul>\n</li>\n</ul>\n<h3>2. 쓰레드의 상태</h3>\n<ul>\n<li>Thread.start() 메소드를 호출하면 곧바로 쓰레드가 실행되는 것처럼 보이지만 사실은 대기 상태가 된다.</li>\n<li>쓰레드 스케줄링으로 선택된 쓰레드가 비로서 CPU 를 점유하고 run() 메소드를 실행한다.</li>\n<li>\n<table>\n<thead>\n<tr>\n<th align=\"left\">상태</th>\n<th align=\"left\">열거 상수</th>\n<th align=\"left\">설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">객체 생성</td>\n<td align=\"left\">NEW</td>\n<td align=\"left\">쓰레드 객체가 생성, 아직 start() 메소드가 호출되지 않음</td>\n</tr>\n<tr>\n<td align=\"left\">실행 대기</td>\n<td align=\"left\">RUNNABLE</td>\n<td align=\"left\">실행 상태로 언제든지 갈 수 있는 상태</td>\n</tr>\n<tr>\n<td align=\"left\">일시 정지</td>\n<td align=\"left\">WAITING</td>\n<td align=\"left\">다른 쓰레드가 통지할 때까지 기다리는 상태</td>\n</tr>\n<tr>\n<td align=\"left\">일시 정지</td>\n<td align=\"left\">TIMED_WAITING</td>\n<td align=\"left\">주어진 시간동안 기다리는 상태</td>\n</tr>\n<tr>\n<td align=\"left\">일시 정지</td>\n<td align=\"left\">BLOCKED</td>\n<td align=\"left\">사용하고자 하는 객체의 락이 풀릴 때까지 기다리는 상태</td>\n</tr>\n<tr>\n<td align=\"left\">종료</td>\n<td align=\"left\">TERMINATED</td>\n<td align=\"left\">실행을 마친 상태</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<br>\n<h3>3. 쓰레드의 우선순위</h3>\n<ul>\n<li>쓰레드마다 우선순위(Priority)를 다르게 설정할 수 있고, 시스템이 busy 할 때 우선순위가 높은 쓰레드에게 먼저 CPU 를 할당해 준다.</li>\n<li>\n<p>우선 순위는 1부터 10 까지의 숫자로 설정할 수 있으며, 다음 3개의 static 변수를 제공한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> MIN_PRIORITY <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> NORM_PRIORITY <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> MAX_PRIORITY <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>쓰레드를 생성하면 기본적으로 우선순위는 5로 설정되어 있다. 어떤 쓰레드가 5보다 큰 우선순위를 갖고 있다면, 시스템은 우선순위가 5인 쓰레드보다 더 우선하여 스케줄링 해준다.</li>\n<li>\n<p>setPriority(), getPriority()</p>\n<ul>\n<li>쓰레드에 우선순위를 설정할 때는 setPriority() 를, 설정된 값을 확인할 때는 getPriority() 를 사용한다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<h3>4. Main 쓰레드</h3>\n<ul>\n<li>메인 쓰레드는 프로그램이 시작하면 가장 먼저 실행되는 쓰레드이며, 모든 쓰레드는 메인 쓰레드로부터 생성된다.</li>\n<li>다른 쓰레드를 생성해서 실행하지 않으면, 즉 메인 쓰레드가 종료되는 순간 프로그램도 종료 된다.</li>\n<li>만약 여러 쓰레드를 실행하면, 메인 쓰레드가 종료되어도 다른 쓰레드가 작업을 마칠 때까지 프로그램이 종료되지 않는다.</li>\n</ul>\n<br>\n<h3>5. 동기화</h3>\n<ul>\n<li>쓰레드는 주로 필드 및 개체 참조 필드에 대한 액세스를 공유하여 통신한다. 이러한 형태의 통신은 매우 효율적이지만 쓰레드 간섭 및 메모리 일관성 오류가 발생할 여지가 있다.\n이러한 오류를 방지하기 위한 동기화 방법으로는 다음과 같은 것들이 있다.</li>\n<li>\n<p>Synchronized Methods</p>\n<ul>\n<li>동기화 할 메소드에 <strong>synchronized</strong> 키워드를 추가한다.</li>\n<li>\n<p>생성자는 동기화 할 수 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SynchronizedCounter</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> c <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      c<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">decrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      c<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">int</span> <span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> c<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>위와 같은 클래스에서 메소드에 synchronized 키워드를 사용하여 동기화하면 두 가지 효과가 있다.</p>\n<ul>\n<li>동일한 개체에서 동기화 된 메서드를 두 번 호출하면 끼어들 수 없다. 한 쓰레드가 개체에 대해 동기화 된 메소드를 실행 때 첫 번째 쓰레드가 개체에 대한 작업을 완료 할 때까지 동기화 된 메소드를 호출하는\n다른 모든 쓰레드는 실행이 일시 중지 된다.</li>\n<li>동기화 된 메소드가 종료되면 동일한 개체에 대해 동기화된 메소드는 후속 호출과 발생 전 관계를 자동으로 설정한다. 이렇게 하면 개체 상태에 대한 변경 내용이 모든 쓰레드에 표시된다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Atomic Access</p>\n<ul>\n<li>변수에 <strong>volatile</strong> 키워드를 사용한다.</li>\n<li>volatile 키워드는 자바 변수를 메인 메모리에 저장하겠다라는 것을 명시하는 것으로, 변수의 값을 읽을때마다 CPU cache 에 저장된 값이 아닌 메인 메모리에서 읽는다.</li>\n<li>cache 를 타지 않고 바로 메인 메모리의 값을 읽기 때문에 여러 쓰레드에서 접근하더라도 메모리 일관성 오류의 위험이 줄어든다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<h3>6. 데드락</h3>\n<ul>\n<li>Deadlock(교착상태)란, 둘 이상의 쓰레드가 lock 을 획득하기 위해 대기하는데, 이 lock 을 잡고 있는 쓰레드들도 똑같이 다른 lock 을 기다리면서 서로 block 상태에 놓이는 것을 말한다.</li>\n<li>\n<p>데드락은 다수의 쓰레드가 같은 lock 을 동시에, 다른 명령에 의해 획득하려 할 때 발생할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Deadlock</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">final</span> <span class=\"token class-name\">Friend</span> alphonse <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Friend</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Alphonse\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">final</span> <span class=\"token class-name\">Friend</span> gaston <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Friend</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Gaston\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> alphonse<span class=\"token punctuation\">.</span><span class=\"token function\">bow</span><span class=\"token punctuation\">(</span>gaston<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> gaston<span class=\"token punctuation\">.</span><span class=\"token function\">bow</span><span class=\"token punctuation\">(</span>alphonse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Friend</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">public</span> <span class=\"token class-name\">Friend</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">bow</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Friend</span> bower<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s: %s has bowed to me!%n\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> bower<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          bower<span class=\"token punctuation\">.</span><span class=\"token function\">bowBack</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">bowBack</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Friend</span> bower<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%s: %s has bowed back to me!%n\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> bower<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n</li>\n</ul>\n<h4>참조 링크</h4>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/index.html\">https://docs.oracle.com/javase/tutorial/essential/concurrency/index.html</a></li>\n<li><a href=\"https://sujl95.tistory.com/63\">https://sujl95.tistory.com/63</a></li>\n</ul>","fields":{"slug":"/whiteship-live-study-week10/","prefix":"2021-01-22"},"frontmatter":{"title":"자바 멀티쓰레드 프로그래밍","category":"whiteship-live-study"}},"authornote":{"id":"265dda60-7971-5464-926f-ea569c79ac0a","html":"<p>🔘 안되면 될 때 까지! 🏃 🔘</p>"}},"pageContext":{"slug":"/whiteship-live-study-week10/","prev":{"id":"997ae424-2354-5c73-9a54-0e7ff425dead","fields":{"slug":"/whiteship-live-study-week9/","prefix":"2021-01-16","source":"posts"},"frontmatter":{"title":"자바 예외처리","category":"whiteship-live-study"}},"next":{"id":"430348ab-79c1-524b-901e-759a5ed327da","fields":{"slug":"/whiteship-live-study-week11/","prefix":"2021-01-26","source":"posts"},"frontmatter":{"title":"자바 열거형","category":"whiteship-live-study"}},"source":"posts"}},"staticQueryHashes":["960164547","960164547"]}